[{"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\index.tsx":"1","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\reportWebVitals.ts":"2","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\App.tsx":"3","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\store\\index.ts":"4","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\styles\\basic-style.ts":"5","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\routes\\index.tsx":"6","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\store\\reducer.ts":"7","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\config\\index.ts":"8","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\error-boundary\\index.tsx":"9","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\store\\module\\user\\reducer.ts":"10","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\user-layout.tsx":"11","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\error-layout.tsx":"12","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\base-layout.tsx":"13","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\loading\\common-loading.tsx":"14","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\init-layout.tsx":"15","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\error-boundary\\style.ts":"16","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\store\\module\\user\\actionCreators.ts":"17","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\routes\\util.ts":"18","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\cookie.ts":"19","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\person.ts":"20","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\tool.ts":"21","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\request.ts":"22","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\workplace\\index.tsx":"23","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\account-center\\index.tsx":"24","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\account-setting\\index.tsx":"25","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-shallow-equal-selector.ts":"26","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\user.ts":"27","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-actions.ts":"28","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\error\\not-found\\index.tsx":"29","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\error\\forbidden\\index.tsx":"30","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\system\\register-result\\index.tsx":"31","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\menu-tree\\index.tsx":"32","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\loading\\layout-loading.tsx":"33","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\category-admin\\index.tsx":"34","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\record-admin\\index.tsx":"35","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\game-admin\\index.tsx":"36","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\system\\register\\index.tsx":"37","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\system\\login\\index.tsx":"38","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\article-list\\index.tsx":"39","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\account-list\\index.tsx":"40","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\bookmark-column\\index.tsx":"41","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\add-article\\index.tsx":"42","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\album-admin\\index.tsx":"43","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\menu-list\\index.tsx":"44","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\analyses\\index.tsx":"45","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\bookmark-collect\\index.tsx":"46","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\menu.ts":"47","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\menu.ts":"48","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\loading\\style.ts":"49","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\validator.ts":"50","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\code.ts":"51","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\system\\login\\style.ts":"52","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\analyses\\style.ts":"53","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-table-pagination.ts":"54","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\bookmark.ts":"55","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\analyse.ts":"56","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\styles\\global-style.ts":"57","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\index.tsx":"58","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\file.ts":"59","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-click-outside.ts":"60","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\context.ts":"61","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\style.ts":"62","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\index.tsx":"63","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\common-modal\\index.tsx":"64","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-footer.tsx":"65","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-main.tsx":"66","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\index.tsx":"67","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-header.tsx":"68","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-aside.tsx":"69","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\context.ts":"70","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\todo.ts":"71","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\context.ts":"72","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-menu-selectd-keys.ts":"73","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-app.tsx":"74","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-rate.tsx":"75","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-dynamic.tsx":"76","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\form-select.tsx":"77","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-history.tsx":"78","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\form-icon.tsx":"79","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-hash-change.ts":"80","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-footer.tsx":"81","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\style.ts":"82","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-list.tsx":"83","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\style.ts":"84","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\simple-upload\\index.tsx":"85","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-control.tsx":"86","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-input-value.ts":"87","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\useDebounce.tsx":"88","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\file.ts":"89","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\simple-upload\\style.ts":"90","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-breadcrumb.tsx":"91","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\bookmark-collect\\style.ts":"92","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\album.ts":"93","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\category.ts":"94","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\tag.ts":"95","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\article.ts":"96","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\game.ts":"97","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\record.ts":"98","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\filter-group\\input-search.tsx":"99","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\filter-group\\drop-down.tsx":"100","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\editor\\index.tsx":"101","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\editor\\style.ts":"102","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\style.ts":"103","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\transition\\index.tsx":"104"},{"size":529,"mtime":1614938615396,"results":"105","hashOfConfig":"106"},{"size":425,"mtime":1614938615398,"results":"107","hashOfConfig":"106"},{"size":884,"mtime":1615108477985,"results":"108","hashOfConfig":"106"},{"size":390,"mtime":1614938615400,"results":"109","hashOfConfig":"106"},{"size":2938,"mtime":1614938615402,"results":"110","hashOfConfig":"106"},{"size":8889,"mtime":1614956180710,"results":"111","hashOfConfig":"106"},{"size":289,"mtime":1614938615402,"results":"112","hashOfConfig":"106"},{"size":1100,"mtime":1615013750189,"results":"113","hashOfConfig":"106"},{"size":1284,"mtime":1614938615384,"results":"114","hashOfConfig":"106"},{"size":2315,"mtime":1614938615401,"results":"115","hashOfConfig":"106"},{"size":292,"mtime":1614938615398,"results":"116","hashOfConfig":"106"},{"size":362,"mtime":1615013909277,"results":"117","hashOfConfig":"106"},{"size":1674,"mtime":1615108372094,"results":"118","hashOfConfig":"106"},{"size":387,"mtime":1614938615388,"results":"119","hashOfConfig":"106"},{"size":3206,"mtime":1614938615398,"results":"120","hashOfConfig":"106"},{"size":258,"mtime":1614938615384,"results":"121","hashOfConfig":"106"},{"size":2560,"mtime":1614938615401,"results":"122","hashOfConfig":"106"},{"size":1459,"mtime":1614938615400,"results":"123","hashOfConfig":"106"},{"size":539,"mtime":1614938615403,"results":"124","hashOfConfig":"106"},{"size":533,"mtime":1614938615404,"results":"125","hashOfConfig":"106"},{"size":2880,"mtime":1614938615405,"results":"126","hashOfConfig":"106"},{"size":4702,"mtime":1614945547681,"results":"127","hashOfConfig":"106"},{"size":238,"mtime":1614938615418,"results":"128","hashOfConfig":"106"},{"size":273,"mtime":1614938615406,"results":"129","hashOfConfig":"106"},{"size":148,"mtime":1614938615407,"results":"130","hashOfConfig":"106"},{"size":397,"mtime":1614938615395,"results":"131","hashOfConfig":"106"},{"size":2875,"mtime":1614938615373,"results":"132","hashOfConfig":"106"},{"size":874,"mtime":1614938615393,"results":"133","hashOfConfig":"106"},{"size":130,"mtime":1614938615414,"results":"134","hashOfConfig":"106"},{"size":459,"mtime":1615013781371,"results":"135","hashOfConfig":"106"},{"size":148,"mtime":1614938615417,"results":"136","hashOfConfig":"106"},{"size":3792,"mtime":1614938615415,"results":"137","hashOfConfig":"106"},{"size":507,"mtime":1615012446303,"results":"138","hashOfConfig":"106"},{"size":5010,"mtime":1614938615412,"results":"139","hashOfConfig":"106"},{"size":5313,"mtime":1614938615416,"results":"140","hashOfConfig":"106"},{"size":5507,"mtime":1614938615414,"results":"141","hashOfConfig":"106"},{"size":4848,"mtime":1614938615418,"results":"142","hashOfConfig":"106"},{"size":5032,"mtime":1615005455349,"results":"143","hashOfConfig":"106"},{"size":7401,"mtime":1614938615410,"results":"144","hashOfConfig":"106"},{"size":6799,"mtime":1614938615407,"results":"145","hashOfConfig":"106"},{"size":8047,"mtime":1614938615412,"results":"146","hashOfConfig":"106"},{"size":8477,"mtime":1614938615408,"results":"147","hashOfConfig":"106"},{"size":8637,"mtime":1614938615409,"results":"148","hashOfConfig":"106"},{"size":8375,"mtime":1615112275353,"results":"149","hashOfConfig":"106"},{"size":8479,"mtime":1615108505194,"results":"150","hashOfConfig":"106"},{"size":11690,"mtime":1614938615411,"results":"151","hashOfConfig":"106"},{"size":2260,"mtime":1614938615372,"results":"152","hashOfConfig":"106"},{"size":4224,"mtime":1615106796886,"results":"153","hashOfConfig":"106"},{"size":451,"mtime":1615009555888,"results":"154","hashOfConfig":"106"},{"size":2792,"mtime":1615009030811,"results":"155","hashOfConfig":"106"},{"size":668,"mtime":1614938615369,"results":"156","hashOfConfig":"106"},{"size":2182,"mtime":1614938615417,"results":"157","hashOfConfig":"106"},{"size":2439,"mtime":1614938615410,"results":"158","hashOfConfig":"106"},{"size":1700,"mtime":1614938615395,"results":"159","hashOfConfig":"106"},{"size":6805,"mtime":1614938615368,"results":"160","hashOfConfig":"106"},{"size":1934,"mtime":1614938615368,"results":"161","hashOfConfig":"106"},{"size":2609,"mtime":1614938615403,"results":"162","hashOfConfig":"106"},{"size":3799,"mtime":1615108312581,"results":"163","hashOfConfig":"106"},{"size":587,"mtime":1614938615404,"results":"164","hashOfConfig":"106"},{"size":717,"mtime":1614938615394,"results":"165","hashOfConfig":"106"},{"size":697,"mtime":1614938615381,"results":"166","hashOfConfig":"106"},{"size":3035,"mtime":1615112161173,"results":"167","hashOfConfig":"106"},{"size":7030,"mtime":1614938615390,"results":"168","hashOfConfig":"106"},{"size":2026,"mtime":1614938615379,"results":"169","hashOfConfig":"106"},{"size":521,"mtime":1614938615380,"results":"170","hashOfConfig":"106"},{"size":416,"mtime":1615112227309,"results":"171","hashOfConfig":"106"},{"size":6143,"mtime":1614938615387,"results":"172","hashOfConfig":"106"},{"size":4702,"mtime":1614938615380,"results":"173","hashOfConfig":"106"},{"size":5334,"mtime":1614938615379,"results":"174","hashOfConfig":"106"},{"size":291,"mtime":1614938615390,"results":"175","hashOfConfig":"106"},{"size":2712,"mtime":1614938615372,"results":"176","hashOfConfig":"106"},{"size":252,"mtime":1614938615386,"results":"177","hashOfConfig":"106"},{"size":990,"mtime":1615012550808,"results":"178","hashOfConfig":"106"},{"size":1901,"mtime":1614938615391,"results":"179","hashOfConfig":"106"},{"size":1388,"mtime":1614938615392,"results":"180","hashOfConfig":"106"},{"size":5538,"mtime":1615106509994,"results":"181","hashOfConfig":"106"},{"size":1813,"mtime":1614938615387,"results":"182","hashOfConfig":"106"},{"size":5482,"mtime":1614938615380,"results":"183","hashOfConfig":"106"},{"size":8245,"mtime":1614938615386,"results":"184","hashOfConfig":"106"},{"size":561,"mtime":1614938615394,"results":"185","hashOfConfig":"106"},{"size":1369,"mtime":1614938615392,"results":"186","hashOfConfig":"106"},{"size":11136,"mtime":1615102952287,"results":"187","hashOfConfig":"106"},{"size":4147,"mtime":1615007283696,"results":"188","hashOfConfig":"106"},{"size":664,"mtime":1614938615387,"results":"189","hashOfConfig":"106"},{"size":3769,"mtime":1614938615389,"results":"190","hashOfConfig":"106"},{"size":1561,"mtime":1614938615391,"results":"191","hashOfConfig":"106"},{"size":535,"mtime":1614938615394,"results":"192","hashOfConfig":"106"},{"size":411,"mtime":1614938615396,"results":"193","hashOfConfig":"106"},{"size":405,"mtime":1614938615371,"results":"194","hashOfConfig":"106"},{"size":291,"mtime":1614938615389,"results":"195","hashOfConfig":"106"},{"size":3426,"mtime":1615012578899,"results":"196","hashOfConfig":"106"},{"size":2191,"mtime":1614938615411,"results":"197","hashOfConfig":"106"},{"size":1406,"mtime":1614938615367,"results":"198","hashOfConfig":"106"},{"size":1378,"mtime":1614938615368,"results":"199","hashOfConfig":"106"},{"size":777,"mtime":1614938615372,"results":"200","hashOfConfig":"106"},{"size":3518,"mtime":1614938615368,"results":"201","hashOfConfig":"106"},{"size":1530,"mtime":1614938615371,"results":"202","hashOfConfig":"106"},{"size":1209,"mtime":1614938615372,"results":"203","hashOfConfig":"106"},{"size":887,"mtime":1614938615385,"results":"204","hashOfConfig":"106"},{"size":1631,"mtime":1614938615385,"results":"205","hashOfConfig":"106"},{"size":2097,"mtime":1614938615383,"results":"206","hashOfConfig":"106"},{"size":401,"mtime":1614938615383,"results":"207","hashOfConfig":"106"},{"size":211,"mtime":1615013935536,"results":"208","hashOfConfig":"106"},{"size":722,"mtime":1615112131785,"results":"209","hashOfConfig":"106"},{"filePath":"210","messages":"211","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},"nl11q7",{"filePath":"213","messages":"214","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"215","messages":"216","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"217","messages":"218","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"219","messages":"220","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"221","messages":"222","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"223","messages":"224","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"225","messages":"226","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"227","messages":"228","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"229","messages":"230","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"231","messages":"232","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"233","messages":"234","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"235","messages":"236","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"237","usedDeprecatedRules":"212"},{"filePath":"238","messages":"239","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"240","messages":"241","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"242","usedDeprecatedRules":"212"},{"filePath":"243","messages":"244","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"245","messages":"246","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"247","messages":"248","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"249","usedDeprecatedRules":"212"},{"filePath":"250","messages":"251","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"252","messages":"253","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"254","messages":"255","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"256","messages":"257","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"258","messages":"259","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"260","messages":"261","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"262","usedDeprecatedRules":"212"},{"filePath":"263","messages":"264","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"265","messages":"266","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"267","messages":"268","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"269","messages":"270","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"271","usedDeprecatedRules":"212"},{"filePath":"272","messages":"273","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"274","messages":"275","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"276","messages":"277","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"278","messages":"279","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"280","messages":"281","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"282","usedDeprecatedRules":"212"},{"filePath":"283","messages":"284","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"285","messages":"286","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"287","usedDeprecatedRules":"212"},{"filePath":"288","messages":"289","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"290","messages":"291","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"292","usedDeprecatedRules":"212"},{"filePath":"293","messages":"294","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"295","messages":"296","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"297","usedDeprecatedRules":"212"},{"filePath":"298","messages":"299","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"300","usedDeprecatedRules":"212"},{"filePath":"301","messages":"302","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"303","usedDeprecatedRules":"212"},{"filePath":"304","messages":"305","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"306","usedDeprecatedRules":"212"},{"filePath":"307","messages":"308","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"309","usedDeprecatedRules":"212"},{"filePath":"310","messages":"311","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"312","messages":"313","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"314","usedDeprecatedRules":"212"},{"filePath":"315","messages":"316","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"317","usedDeprecatedRules":"212"},{"filePath":"318","messages":"319","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"320","messages":"321","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"322","usedDeprecatedRules":"212"},{"filePath":"323","messages":"324","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"325","messages":"326","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"327","messages":"328","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"329","messages":"330","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"331","messages":"332","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"333","messages":"334","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"335","messages":"336","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"337","messages":"338","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"339","messages":"340","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"341","messages":"342","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"343","messages":"344","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"345","messages":"346","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"347","messages":"348","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"349","usedDeprecatedRules":"212"},{"filePath":"350","messages":"351","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"352","messages":"353","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"354","usedDeprecatedRules":"212"},{"filePath":"355","messages":"356","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"357","messages":"358","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"359","messages":"360","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"361","messages":"362","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"363","usedDeprecatedRules":"212"},{"filePath":"364","messages":"365","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"366","usedDeprecatedRules":"212"},{"filePath":"367","messages":"368","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"369","usedDeprecatedRules":"212"},{"filePath":"370","messages":"371","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"372","messages":"373","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"374","usedDeprecatedRules":"212"},{"filePath":"375","messages":"376","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"377","messages":"378","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"379","messages":"380","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"381","usedDeprecatedRules":"212"},{"filePath":"382","messages":"383","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"384","usedDeprecatedRules":"212"},{"filePath":"385","messages":"386","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"387","usedDeprecatedRules":"212"},{"filePath":"388","messages":"389","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"390","messages":"391","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"392","usedDeprecatedRules":"212"},{"filePath":"393","messages":"394","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"395","usedDeprecatedRules":"212"},{"filePath":"396","messages":"397","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"398","messages":"399","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"400","messages":"401","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"402","messages":"403","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"404","usedDeprecatedRules":"212"},{"filePath":"405","messages":"406","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"407","messages":"408","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"409","usedDeprecatedRules":"212"},{"filePath":"410","messages":"411","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"412","messages":"413","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"414","messages":"415","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"416"},{"filePath":"417","messages":"418","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"419","messages":"420","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"421","messages":"422","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"423","messages":"424","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"425","messages":"426","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"427","messages":"428","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"429","messages":"430","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"431","messages":"432","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"433","messages":"434","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"435","messages":"436","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"437","messages":"438","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"439","messages":"440","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"441","usedDeprecatedRules":"212"},{"filePath":"442","messages":"443","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"444","messages":"445","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"446","messages":"447","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"212"},{"filePath":"448","messages":"449","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\index.tsx",[],["450","451"],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\reportWebVitals.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\App.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\store\\index.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\styles\\basic-style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\routes\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\store\\reducer.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\config\\index.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\error-boundary\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\store\\module\\user\\reducer.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\user-layout.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\error-layout.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\base-layout.tsx",["452"],"import { FC, memo, useMemo } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport { RouteConfigComponentProps } from 'react-router-config'\r\nimport { renderRoutes } from 'react-router-config'\r\nimport { IStoreState } from '../store/types'\r\nimport Container from '../components/container'\r\nimport { IUserType } from '../store/module/user/reducer'\r\nimport { findBusiness } from '../routes/util'\r\n\r\nconst BaseLayout: FC<RouteConfigComponentProps> = memo(props => {\r\n  const { route, location } = props\r\n\r\n  const isLogin = useSelector<IStoreState, Boolean>(state => state.user.isLogin)\r\n\r\n  const role = useSelector<IStoreState, IUserType>(state => state.user.role)\r\n\r\n  const isForbidden = useMemo(() => {\r\n    let { pathname } = location\r\n    /** 重定向带来的坑 */\r\n    if (pathname === '/') {\r\n      pathname = '/dashboard/analyses'\r\n    }\r\n    const route = findBusiness(pathname)\r\n\r\n    /** 没有找到路由信息 (todo) */\r\n    if (route === undefined) {\r\n      return false\r\n    }\r\n    const { auth } = route\r\n\r\n    /** 不包含权限默认是可以访问 */\r\n    if (auth === undefined || auth.length === 0) return false\r\n\r\n    /** 如果存在 auth， 但是当前用户类型不包含里面，设置为 forbidden */\r\n    return auth.includes(role) === false\r\n  }, [role, location.pathname])\r\n\r\n  /** 没有登录重定向到登录页 */\r\n  if (!isLogin) {\r\n    return <Redirect to=\"/system/login\" />\r\n  }\r\n\r\n  /** 没有权限访问 */\r\n  if (isForbidden) {\r\n    return <Redirect to=\"/error/403\" />\r\n  }\r\n\r\n  return <Container>{renderRoutes(route?.routes)}</Container>\r\n})\r\n\r\nexport default BaseLayout\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\loading\\common-loading.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\init-layout.tsx",["453"],"import { FC, useEffect, Suspense, memo } from 'react'\r\nimport { RouteConfigComponentProps } from 'react-router-config'\r\nimport { renderRoutes } from 'react-router-config'\r\nimport { IUserInfo } from '../store/module/user/reducer'\r\nimport { UserUrls } from '../api/user'\r\nimport LayoutLoading from '../components/loading/layout-loading'\r\nimport useActions from '../hooks/use-actions'\r\nimport useShallowEqualSelector from '../hooks/use-shallow-equal-selector'\r\nimport {\r\n  handleFetchUserInfoFailed,\r\n  handleFetchUserInfoSuccess,\r\n  handleToggleEnterLoading,\r\n  SuccessResult,\r\n} from '../store/module/user/actionCreators'\r\nimport { getUserType } from '../utils/person'\r\nimport { normalRequest } from '../utils/request'\r\nimport config from '../config'\r\nimport { combineURL } from '../utils/tool'\r\n\r\n/** 从 redux 中获取的 store 属性 */\r\ninterface IStoreProps {\r\n  /** 进入加载状态 */\r\n  enterLoading: boolean\r\n\r\n  /** 登录令牌 */\r\n  token: string\r\n}\r\n\r\n/** 行为回调函数 */\r\ntype IActionCallback = [\r\n  /** 切换进场动画 */\r\n  (isLoading: boolean) => void,\r\n\r\n  /** 获取用户信息成功 */\r\n  (result: SuccessResult) => void,\r\n\r\n  /** 获取用户信息失败 */\r\n  () => void,\r\n]\r\n\r\n/**\r\n * 初始化布局\r\n * 1. 根据 token 获取用户信息\r\n * 2. 有用户信息，初始化一些属性，没有的话去登录页\r\n */\r\nconst InitLayout: FC<RouteConfigComponentProps> = memo(props => {\r\n  const { enterLoading, token } = useShallowEqualSelector<IStoreProps>(\r\n    state => {\r\n      const { enterLoading, token } = state.user\r\n\r\n      return { enterLoading, token }\r\n    },\r\n  )\r\n\r\n  const [toggleEnterLoading, fetchUserSuccess, fetchUserFailed] = useActions([\r\n    /** 切换进场动画 */\r\n    handleToggleEnterLoading,\r\n\r\n    /** 获取用户信息成功 */\r\n    handleFetchUserInfoSuccess,\r\n\r\n    /** 获取用户信息失败 */\r\n    handleFetchUserInfoFailed,\r\n  ]) as IActionCallback\r\n\r\n  useEffect(() => {\r\n    /** 设置 enterLoading 为 true */\r\n    toggleEnterLoading(true)\r\n\r\n    /** 获取用户信息 */\r\n    normalRequest<IUserInfo>({\r\n      url: combineURL(config.API_URL, UserUrls.fetchUserInfo),\r\n      method: 'GET',\r\n      headers: {\r\n        Authorization: 'Bearer ' + token,\r\n      },\r\n    })\r\n      .then(res => {\r\n        const { data } = res.data\r\n\r\n        /** 获取用户信息成功：拿到用户信息，设置用户的角色 */\r\n        const result: SuccessResult = {\r\n          userInfo: data,\r\n          role: getUserType(data),\r\n        }\r\n        fetchUserSuccess(result)\r\n      })\r\n      .catch(e => {\r\n        /** 获取用户信息失败：设置用户信息为空，登录状态为假，清空token，重定向到登录页 */\r\n        fetchUserFailed()\r\n        props.history.replace('/system/login')\r\n      })\r\n      .finally(() => {\r\n        /** 设置 enterLoading 为 false */\r\n        toggleEnterLoading(false)\r\n      })\r\n  }, [toggleEnterLoading, fetchUserSuccess, fetchUserFailed])\r\n\r\n  if (enterLoading) {\r\n    return <LayoutLoading />\r\n  }\r\n\r\n  return (\r\n    <Suspense fallback={<LayoutLoading />}>\r\n      <div className=\"\">{renderRoutes(props.route?.routes)}</div>\r\n    </Suspense>\r\n  )\r\n})\r\n\r\nexport default InitLayout\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\error-boundary\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\store\\module\\user\\actionCreators.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\routes\\util.ts",["454"],"import { IUserType } from './../store/module/user/reducer'\r\nimport { IRoute } from './types'\r\nimport routes from './index'\r\n\r\n/** 拿到系统、错误、业务 */\r\nlet { routes: rootRoutes } = routes[0]\r\n\r\n/** 扁平化路由 */\r\nconst flattenRoute = (routes: IRoute[]) => {\r\n  let result: IRoute[] = []\r\n  routes.forEach(r => {\r\n    result.push(r)\r\n    if (r.routes) {\r\n      result = result.concat(flattenRoute(r.routes))\r\n    }\r\n  })\r\n\r\n  return result\r\n}\r\n\r\n/** 继承权限 */\r\nexport const extendAuth = (routes: IRoute[], parentAuth: IUserType[]) => {\r\n  routes.forEach(route => {\r\n    const { auth: childAuth, routes: childRoutes } = route\r\n    /** 合并继承 auth */\r\n    route.auth = childAuth ? [...parentAuth, ...childAuth] : [...parentAuth]\r\n\r\n    /** 如果有权限，并且有子路由 */\r\n    if (childRoutes) {\r\n      extendAuth(childRoutes, route.auth)\r\n    }\r\n  })\r\n}\r\n\r\n/** 获取业务路由 */\r\nconst getBusinessRoutes = () => {\r\n  const businessRoutes = rootRoutes!.find(route => {\r\n    const { meta, routes } = route\r\n    if (meta.title === '业务路由') {\r\n      return routes\r\n    }\r\n  })!\r\n\r\n  /** 继承权限 */\r\n  // extendAuth(businessRoutes.routes!, [])\r\n\r\n  return businessRoutes\r\n}\r\n\r\n/** 导出业务路由 */\r\nexport const businessRoutes = getBusinessRoutes()\r\n\r\n/** 查找路由 */\r\nexport const findBusiness = (pathname: string) => {\r\n  return flattenRoute(businessRoutes.routes!).find(r => r.path === pathname)\r\n}\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\cookie.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\person.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\tool.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\request.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\workplace\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\account-center\\index.tsx",["455"],"import { Component, FC } from 'react'\r\n\r\nconst AccountCenter: FC = (props: any) => {\r\n  return <div>AccountCenter</div>\r\n}\r\n\r\n// class AccountCenter extends Component {\r\n//   render() {\r\n//     return <div>AccountCenter</div>\r\n//   }\r\n// }\r\n\r\nexport default AccountCenter\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\account-setting\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-shallow-equal-selector.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\user.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-actions.ts",["456","457"],"import { useMemo } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport { IAction, AsyncAction } from '../store/types'\r\n\r\ninterface ActionCb {\r\n  /** 同步行为 && 异步行为 TODO bindActionCreators 能弄异步行为吗? */\r\n  (...args: any[]): AsyncAction | IAction\r\n}\r\n\r\n/** 绑定一个或多个actions */\r\nexport default function useActions(\r\n  /** 行为集合 */\r\n  actions: ActionCb[] | ActionCb,\r\n  /** 更新依赖 */\r\n  deps?: any[],\r\n): any {\r\n  /** 拿到 redux 中的 dispatch */\r\n  const dispatch = useDispatch()\r\n\r\n  /** 依赖收集 */\r\n  deps = deps ? [...deps, dispatch] : [dispatch]\r\n\r\n  return useMemo(() => {\r\n    if (Array.isArray(actions)) {\r\n      return actions.map(action => bindActionCreators(action, dispatch))\r\n    }\r\n\r\n    return bindActionCreators(actions, dispatch)\r\n  }, deps)\r\n}\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\error\\not-found\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\error\\forbidden\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\system\\register-result\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\menu-tree\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\loading\\layout-loading.tsx",["458"],"import { FC, memo } from 'react'\r\nimport { Spin } from 'antd'\r\nimport logoImg from '../../asserts/images/logo.png'\r\n\r\nimport { InitLayoutLoadingWrapper } from './style'\r\n\r\nconst LayoutLoading: FC = () => {\r\n  return (\r\n    <InitLayoutLoadingWrapper>\r\n      <img src={logoImg} alt=\"\" className=\"logo\" />\r\n\r\n      <Spin size=\"large\" className=\"icon\" spinning={true} />\r\n\r\n      <p className=\"tip\">正在进入后台，请稍后...</p>\r\n    </InitLayoutLoadingWrapper>\r\n  )\r\n}\r\n\r\nexport default LayoutLoading\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\category-admin\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\record-admin\\index.tsx",["459","460"],"import { FC, useState, memo, useEffect, useRef, useMemo } from 'react'\r\nimport { Card, Button, Table, Tag, message } from 'antd'\r\nimport { ColumnsType, TablePaginationConfig } from 'antd/lib/table'\r\nimport dayJs from 'dayjs'\r\nimport CommonModal, { ImperativeProps } from '../../components/common-modal'\r\nimport { CommonPanel, CommonTableWra } from '../analyses/style'\r\nimport FormDrawer, {\r\n  FormDrawerFieldProps,\r\n  DrawerImperativeProps,\r\n} from '../../components/form-drawer'\r\nimport useTablePagination from '../../hooks/use-table-pagination'\r\n\r\nimport {\r\n  fetchRecords,\r\n  createRecord,\r\n  updateRecord,\r\n  removeRecord,\r\n} from '../../api/record'\r\nimport { WithCountResponseData } from '../../api/types'\r\n\r\ninterface RecordData {\r\n  _id: string\r\n\r\n  /** 记录内容 */\r\n  content: string\r\n\r\n  /** 创建记录时间 */\r\n  createdAt: string\r\n}\r\n\r\ninterface FormResult {\r\n  content: string\r\n}\r\n\r\nconst RecordAdmin: FC = memo(() => {\r\n  /** 表格数据 */\r\n  const [tableData, setTableData] = useState<RecordData[]>([])\r\n\r\n  /** 获取表格数据加载状态 */\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  /** 重新获取数据标识 */\r\n  const [refreshFlag, toggleRefreshFlag] = useState(false)\r\n\r\n  /** 分页配置 */\r\n  const [pagination, setPagination, afterRemove] = useTablePagination({\r\n    pageSize: 8,\r\n  })\r\n\r\n  /** 控制模态框 */\r\n  const modalRef = useRef<ImperativeProps>(null)\r\n\r\n  const columns: ColumnsType<any> = [\r\n    {\r\n      title: '记录内容',\r\n      align: 'center',\r\n      dataIndex: 'content',\r\n      ellipsis: true,\r\n      width: '65%',\r\n      key: 'content',\r\n      render: content => <Tag color=\"volcano\">{content}</Tag>,\r\n    },\r\n    {\r\n      title: '记录时间',\r\n      key: 'createdAt',\r\n      align: 'center',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => (\r\n        <Tag color=\"green\">{dayJs(createdAt).format('YYYY-MM-DD')}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: '操作',\r\n      dataIndex: 'actions',\r\n      key: 'actions',\r\n      align: 'center',\r\n      render: (...args) => {\r\n        const record = args[1] as RecordData\r\n\r\n        return (\r\n          <Button.Group>\r\n            <Button danger ghost onClick={() => handleRemove(record._id)}>\r\n              删除\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              ghost\r\n              onClick={() => handleShowDrawer(record)}\r\n            >\r\n              编辑\r\n            </Button>\r\n          </Button.Group>\r\n        )\r\n      },\r\n    },\r\n  ]\r\n\r\n  /** 抽屉框 */\r\n  const drawerRef = useRef<DrawerImperativeProps>(null)\r\n\r\n  /** 表单字段数据 */\r\n  const fields: FormDrawerFieldProps[] = useMemo(() => {\r\n    return [{ type: 'input', label: '内容', name: 'content', value: '' }]\r\n  }, [])\r\n\r\n  /** 处理展示抽屉 */\r\n  const handleShowDrawer = (editItem: RecordData | null) => {\r\n    drawerRef.current!.openDrawer(handleSubmit, editItem)\r\n  }\r\n\r\n  const handleRemove = (recordId: string) => {\r\n    const { openModal, closeModal } = modalRef.current!\r\n\r\n    openModal('确定要删除该条记录吗', () => {\r\n      removeRecord(recordId).then(res => {\r\n        const { code } = res.data\r\n        // 删除成功\r\n        if (code === 200) {\r\n          message.success('删除成功')\r\n          afterRemove(tableData.length - 1)\r\n          toggleRefreshFlag(f => !f)\r\n          closeModal()\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleSubmit = (result: FormResult, editData: RecordData | null) => {\r\n    const { content } = result\r\n\r\n    function afterSuccess(msg: string) {\r\n      message.success(msg)\r\n\r\n      toggleRefreshFlag(f => !f)\r\n\r\n      drawerRef.current!.closeDrawer()\r\n    }\r\n\r\n    if (editData) {\r\n      updateRecord(editData._id, content).then(() =>\r\n        afterSuccess('修改记录成功'),\r\n      )\r\n    } else {\r\n      createRecord(content).then(() => afterSuccess('添加记录成功'))\r\n    }\r\n  }\r\n\r\n  /** 获取表格数据 */\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetchRecords<WithCountResponseData<RecordData[]>>({\r\n      pageNum: pagination.current,\r\n      pageSize: pagination.pageSize,\r\n    }).then(res => {\r\n      const {\r\n        data: { list, count },\r\n      } = res.data\r\n      setTableData(list)\r\n      setPagination(pagination => {\r\n        return {\r\n          ...pagination,\r\n          total: count,\r\n        }\r\n      })\r\n      setLoading(false)\r\n    })\r\n  }, [refreshFlag, pagination.current, pagination.pageSize])\r\n\r\n  const extraButton = (\r\n    <Button\r\n      size=\"small\"\r\n      type=\"primary\"\r\n      ghost\r\n      onClick={() => handleShowDrawer(null)}\r\n    >\r\n      添加记录\r\n    </Button>\r\n  )\r\n\r\n  return (\r\n    <CommonPanel>\r\n      <Card title=\"记录管理\" className=\"panel-card\" extra={extraButton}>\r\n        <CommonTableWra>\r\n          <Table\r\n            rowKey=\"_id\"\r\n            bordered\r\n            columns={columns}\r\n            size=\"middle\"\r\n            dataSource={tableData}\r\n            loading={isLoading}\r\n            pagination={pagination}\r\n            scroll={{ x: 900 }}\r\n          />\r\n        </CommonTableWra>\r\n      </Card>\r\n\r\n      {/* 公共弹框 */}\r\n      <CommonModal ref={modalRef} />\r\n\r\n      <FormDrawer baseTitle=\"记录\" fields={fields} ref={drawerRef} />\r\n    </CommonPanel>\r\n  )\r\n})\r\n\r\nexport default RecordAdmin\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\game-admin\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\system\\register\\index.tsx",["461"],"import { FC, useState, memo, useMemo, useCallback } from 'react'\r\nimport { Spin, Form, Input, Button, message } from 'antd'\r\nimport {\r\n  UserOutlined,\r\n  LockOutlined,\r\n  MobileOutlined,\r\n  PropertySafetyOutlined,\r\n} from '@ant-design/icons'\r\nimport { Link, RouteComponentProps } from 'react-router-dom'\r\nimport { Brand } from '../login'\r\nimport { LoginWithRegisterContainer, FormAreaWra } from '../login/style'\r\nimport { throttle } from '../../../utils/tool'\r\nimport { registerRequest, RegisterParams } from '../../../api/user'\r\nimport { fetchCode, CodeType } from '../../../api/code'\r\nimport formStrategy from '../../../utils/validator'\r\n\r\nconst { useForm } = Form\r\n\r\nconst Register: FC<RouteComponentProps> = memo(props => {\r\n  const [isLoading, setLoading] = useState(false)\r\n  const { history } = props\r\n  const [form] = useForm()\r\n\r\n  const changeFormValue = useCallback(\r\n    (name: string, val: string) => {\r\n      form.setFieldsValue({ [name]: val })\r\n    },\r\n    [form],\r\n  )\r\n\r\n  const onFinish = useMemo(() => {\r\n    return throttle((result: RegisterParams) => {\r\n      setLoading(true)\r\n      registerRequest(result)\r\n        .then(res => {\r\n          const { code } = res.data\r\n          if (code === 200) {\r\n            message.success('注册成功~')\r\n            history.push('/system/login')\r\n          }\r\n          setLoading(false)\r\n        })\r\n        .catch(error => {\r\n          setLoading(false)\r\n          message.error(error.msg)\r\n        })\r\n    }, 1200)\r\n  }, [history]) as any\r\n\r\n  const handleFetchCode = () => {\r\n    return message.info('验证码暂时为：200')\r\n    fetchCode({ codeType: CodeType.register }).then(res => {})\r\n  }\r\n\r\n  return (\r\n    <LoginWithRegisterContainer>\r\n      <Brand />\r\n      <FormAreaWra>\r\n        <Spin spinning={isLoading}>\r\n          <h4 className=\"formArea__title\">管理员注册</h4>\r\n          <Form\r\n            name=\"normal_register\"\r\n            className=\"register-form\"\r\n            onFinish={onFinish}\r\n            form={form}\r\n          >\r\n            <Form.Item\r\n              className=\"formArea__item\"\r\n              name=\"account\"\r\n              rules={[{ required: true, message: '账号不能为空!' }]}\r\n            >\r\n              <Input\r\n                prefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n                placeholder=\"账号\"\r\n              />\r\n            </Form.Item>\r\n            <Form.Item\r\n              className=\"formArea__item\"\r\n              name=\"psw\"\r\n              rules={[{ required: true, message: '密码不能为空!' }]}\r\n            >\r\n              <Input.Password\r\n                prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                type=\"password\"\r\n                placeholder=\"密码\"\r\n              />\r\n            </Form.Item>\r\n            <Form.Item\r\n              className=\"formArea__item\"\r\n              name=\"tel\"\r\n              rules={[\r\n                {\r\n                  validator(rule, val) {\r\n                    if (!formStrategy.useStrategy('validTel', val)) {\r\n                      return Promise.reject('请正确输入手机号!')\r\n                    }\r\n\r\n                    return Promise.resolve()\r\n                  },\r\n                },\r\n              ]}\r\n            >\r\n              <Input\r\n                prefix={<MobileOutlined className=\"site-form-item-icon\" />}\r\n                placeholder=\"手机号\"\r\n              />\r\n            </Form.Item>\r\n            <Form.Item\r\n              className=\"formArea__item formArea__item--code\"\r\n              name=\"code\"\r\n              rules={[{ required: true, message: '验证码不能为空!' }]}\r\n            >\r\n              <>\r\n                <Input\r\n                  name=\"code\"\r\n                  prefix={\r\n                    <PropertySafetyOutlined className=\"site-form-item-icon\" />\r\n                  }\r\n                  style={{ width: 200 }}\r\n                  onChange={e => changeFormValue('code', e.target.value)}\r\n                  placeholder=\"验证码\"\r\n                />\r\n                <Button style={{ marginLeft: 5 }} onClick={handleFetchCode}>\r\n                  获取验证码\r\n                </Button>\r\n              </>\r\n            </Form.Item>\r\n            <div className=\"to-register\">\r\n              <Button type=\"link\">\r\n                <Link to=\"/system/login\" replace>\r\n                  返回登录\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n            <Form.Item>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                block\r\n                loading={isLoading}\r\n              >\r\n                立即注册\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Spin>\r\n      </FormAreaWra>\r\n    </LoginWithRegisterContainer>\r\n  )\r\n})\r\n\r\nexport default Register\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\system\\login\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\article-list\\index.tsx",["462","463"],"import { FC, memo, useState, useEffect, useRef } from 'react'\r\nimport dayJs from 'dayjs'\r\nimport { Card, Table, Tag, Button, message, Switch } from 'antd'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { ColumnsType } from 'antd/lib/table'\r\nimport CommonModal, { ImperativeProps } from '../../components/common-modal'\r\nimport FilterInputSearch from '../../components/filter-group/input-search'\r\nimport FilterDropDown, {\r\n  menuOption,\r\n} from '../../components/filter-group/drop-down'\r\nimport { CommonPanel, CommonFilterWra, CommonTableWra } from '../analyses/style'\r\nimport {\r\n  fetchArticleList,\r\n  deleteArticle,\r\n  FetchArticleListParams,\r\n} from '../../api/article'\r\nimport { ArticleStatus, ArticleData } from '../add-article'\r\nimport { CategoryData } from '../category-admin'\r\nimport { WithCountResponseData } from '../../api/types'\r\nimport useTablePagination from '../../hooks/use-table-pagination'\r\n\r\nconst ArticleList: FC = () => {\r\n  const history = useHistory()\r\n  /** 发布状态 */\r\n  const [publishStatus, setPublishStatus] = useState<string>('')\r\n\r\n  /** 获取表格数据加载状态 */\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  const publishStatusOptions: Array<menuOption<any>> = [\r\n    { title: '全部', value: '' },\r\n    { title: '已发布', value: '1' },\r\n    { title: '草稿', value: '0' },\r\n  ]\r\n\r\n  /** 搜索标题 */\r\n  const [searchTitle, setSearchTitle] = useState('')\r\n\r\n  /** 表格数据 */\r\n  const [tableData, setTableData] = useState<ArticleData[]>([])\r\n\r\n  /** 当前选中的行 */\r\n  const [selectedRowKeys, setSelectedRowKeys] = useState<string[]>([])\r\n\r\n  /** 重新获取数据标识 */\r\n  const [refreshFlag, toggleRefreshFlag] = useState(false)\r\n\r\n  /** 控制模态框 */\r\n  const modalRef = useRef<ImperativeProps>(null)\r\n\r\n  /** 选中列表 */\r\n  const rowSelection = {\r\n    onChange: (selectKeys: string[]) => {\r\n      setSelectedRowKeys(selectKeys)\r\n    },\r\n    selectedRowKeys,\r\n  }\r\n\r\n  const columns: ColumnsType<any> = [\r\n    {\r\n      title: '标题',\r\n      align: 'center',\r\n      dataIndex: 'title',\r\n      key: 'title',\r\n      ellipsis: true,\r\n      render: (title: string) => {\r\n        return (\r\n          <Tag color=\"volcano\" className=\"text-ellipsis\">\r\n            {title}\r\n          </Tag>\r\n        )\r\n      },\r\n    },\r\n    {\r\n      title: '作者',\r\n      align: 'center',\r\n      dataIndex: 'author',\r\n      render: (author: string) => <Tag color=\"gold\">{author}</Tag>,\r\n    },\r\n    {\r\n      title: '分类',\r\n      align: 'center',\r\n      dataIndex: 'category',\r\n      render: (category?: CategoryData) => {\r\n        return <Tag color=\"magenta\">{category ? category.name : '其他'}</Tag>\r\n      },\r\n    },\r\n\r\n    {\r\n      title: '发表日期',\r\n      align: 'center',\r\n      key: 'createdAt',\r\n      dataIndex: 'createdAt',\r\n      render: (createdAt: string) => (\r\n        <Tag color=\"geekblue\">\r\n          {dayJs(createdAt).format('YYYY-MM-DD HH:ss')}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: '完成状态',\r\n      align: 'center',\r\n      key: 'completed',\r\n      dataIndex: 'completed',\r\n      render: (completed: boolean) => {\r\n        return <Tag color=\"magenta\">{completed ? '已发布' : '草稿'}</Tag>\r\n        //   return  <Switch\r\n        //   checkedChildren=\"发布\"\r\n        //   unCheckedChildren=\"草稿\"\r\n        //   checked={completed}\r\n        // />\r\n      },\r\n    },\r\n\r\n    {\r\n      title: '文章操作',\r\n      dataIndex: 'actions',\r\n      key: 'actions',\r\n      align: 'center',\r\n      render: (...args) => {\r\n        const record = args[1] as ArticleData\r\n        return (\r\n          <Button.Group>\r\n            <Button\r\n              type=\"primary\"\r\n              ghost\r\n              onClick={() => {\r\n                history.push(`/article/add/${record._id}`)\r\n              }}\r\n            >\r\n              编辑\r\n            </Button>\r\n            <Button danger ghost onClick={() => handleRemove(record._id)}>\r\n              删除\r\n            </Button>\r\n          </Button.Group>\r\n        )\r\n      },\r\n    },\r\n  ]\r\n\r\n  /** 分页设置 */\r\n  const [pagination, setPagination] = useTablePagination({\r\n    pageSize: 6,\r\n    simple: true,\r\n  })\r\n\r\n  /** 删除后检查数据，如果当前表格数据只有一条，页码往前面走。 => 获取数据 */\r\n  const delAfterCheckData = () => {\r\n    if (tableData.length === 0) {\r\n      setPagination(pagination => {\r\n        const newCurrent = pagination.current! - 1\r\n        return {\r\n          ...pagination,\r\n          current: newCurrent <= 1 ? 1 : newCurrent,\r\n        }\r\n      })\r\n    }\r\n\r\n    /** 重新获取 */\r\n    toggleRefreshFlag(flag => !flag)\r\n  }\r\n\r\n  const handleRemove = (param: string | string[]) => {\r\n    const { openModal, closeModal } = modalRef.current!\r\n\r\n    let content\r\n    if (Array.isArray(param)) {\r\n      // 批量删除\r\n      content = `该操作会删除${param.length}篇文章，请谨慎操作!!!`\r\n    } else {\r\n      content = '确定要删除该篇文章吗?'\r\n    }\r\n\r\n    openModal(content, () => {\r\n      deleteArticle(param)\r\n        .then(res => {\r\n          const { code } = res.data\r\n          // 删除成功\r\n          if (code === 200) {\r\n            // 检查数据\r\n            delAfterCheckData()\r\n            message.success('删除成功')\r\n          }\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n        .finally(() => closeModal())\r\n    })\r\n  }\r\n\r\n  /** 获取表格数据 */\r\n  useEffect(() => {\r\n    setLoading(true)\r\n\r\n    const params: FetchArticleListParams = {\r\n      completed:\r\n        publishStatus === ''\r\n          ? undefined\r\n          : publishStatus === ArticleStatus.published,\r\n      title: searchTitle,\r\n      pageNum: pagination.current,\r\n      pageSize: pagination.pageSize,\r\n    }\r\n\r\n    fetchArticleList<WithCountResponseData<ArticleData[]>>(params).then(res => {\r\n      const { count, list } = res.data.data\r\n      setTableData(list)\r\n      setPagination(pagination => ({\r\n        ...pagination,\r\n        total: count, //data.length\r\n      }))\r\n      setLoading(false)\r\n    })\r\n  }, [\r\n    publishStatus,\r\n    searchTitle,\r\n    pagination.current,\r\n    pagination.pageSize,\r\n    refreshFlag,\r\n  ])\r\n\r\n  return (\r\n    <CommonPanel>\r\n      <Card className=\"panel-card\" title=\"文章列表\">\r\n        <CommonFilterWra>\r\n          <FilterDropDown\r\n            className=\"split\"\r\n            menuOptions={publishStatusOptions}\r\n            toggle={setPublishStatus}\r\n          />\r\n\r\n          <FilterInputSearch\r\n            className=\"split\"\r\n            placeholder=\"根据文章标题搜索\"\r\n            onPress={setSearchTitle}\r\n          />\r\n\r\n          {/* 批量删除 */}\r\n          {selectedRowKeys.length > 0 && (\r\n            <Button danger ghost onClick={() => handleRemove(selectedRowKeys)}>\r\n              批量删除\r\n            </Button>\r\n          )}\r\n        </CommonFilterWra>\r\n\r\n        <CommonTableWra>\r\n          <Table\r\n            rowKey=\"_id\"\r\n            rowSelection={rowSelection as any}\r\n            columns={columns}\r\n            size=\"middle\"\r\n            dataSource={tableData}\r\n            loading={isLoading}\r\n            pagination={pagination}\r\n            scroll={{ x: 1280 }}\r\n          />\r\n        </CommonTableWra>\r\n      </Card>\r\n\r\n      {/* 公共弹框 */}\r\n      <CommonModal ref={modalRef} />\r\n    </CommonPanel>\r\n  )\r\n}\r\n\r\nexport default memo(ArticleList)\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\account-list\\index.tsx",["464"],"import { FC, useState, memo, useEffect, useRef, useMemo } from 'react'\r\nimport { Card, Button, Table, Tag, message, Avatar, Descriptions } from 'antd'\r\nimport { ColumnsType, TablePaginationConfig } from 'antd/lib/table'\r\nimport dayJs from 'dayjs'\r\nimport CommonModal, { ImperativeProps } from '../../components/common-modal'\r\nimport { CommonPanel, CommonTableWra } from '../analyses/style'\r\nimport { changeLevel, fetchUserList, removeUser } from '../../api/user'\r\nimport { IUserType } from '../../store/module/user/reducer'\r\nimport defaultAvatar from '../../asserts/images/default.png'\r\nimport { getUserType } from '../../utils/person'\r\n\r\ninterface UserData {\r\n  _id: string\r\n\r\n  /** 用户账号 */\r\n  account: string\r\n\r\n  /** 用户昵称 */\r\n  nickname: string\r\n\r\n  /** 用户性别 (保密|女|男) */\r\n  sex: '-1' | '0' | '1'\r\n\r\n  /** 用户电话 */\r\n  tel: string\r\n\r\n  /** 用户类型 */\r\n  type: '0' | '1' | '2'\r\n\r\n  /** 创建用户时间 */\r\n  createdAt: string\r\n\r\n  /** 修改用户时间 */\r\n  updatedAt: string\r\n}\r\n\r\ninterface UserOtherInfoProps {\r\n  userInfo: UserData\r\n}\r\n\r\nconst UserOtherInfo: FC<UserOtherInfoProps> = memo(props => {\r\n  const {\r\n    userInfo: { tel, nickname, sex },\r\n  } = props\r\n  return (\r\n    <Descriptions bordered>\r\n      <Descriptions.Item label=\"昵称\">{nickname}</Descriptions.Item>\r\n      <Descriptions.Item label=\"手机号\">\r\n        <a href={`tel:${tel}`} style={{ color: 'inherit' }}>\r\n          {tel}\r\n        </a>\r\n      </Descriptions.Item>\r\n      <Descriptions.Item label=\"性别\">\r\n        {sex === '-1' ? '保密' : sex === '0' ? '女' : '男'}\r\n      </Descriptions.Item>\r\n    </Descriptions>\r\n  )\r\n})\r\n\r\nconst AccountList: FC = memo(() => {\r\n  /** 表格数据 */\r\n  const [tableData, setTableData] = useState<UserData[]>([])\r\n\r\n  /** 获取表格数据加载状态 */\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  /** 重新获取数据标识 */\r\n  const [refreshFlag, toggleRefreshFlag] = useState(false)\r\n\r\n  /** 控制模态框 */\r\n  const modalRef = useRef<ImperativeProps>(null)\r\n\r\n  /** 分页配置 */\r\n  const pagination: TablePaginationConfig = {\r\n    pageSize: 8,\r\n  }\r\n\r\n  const columns: ColumnsType<any> = [\r\n    {\r\n      title: '头像',\r\n      align: 'center',\r\n      dataIndex: 'avatar',\r\n      key: 'avatar',\r\n      render: src => {\r\n        return <Avatar size={40} src={src || defaultAvatar} />\r\n      },\r\n    },\r\n    {\r\n      title: '账号',\r\n      align: 'center',\r\n      dataIndex: 'account',\r\n      render: text => <Tag color=\"volcano\">{text}</Tag>,\r\n    },\r\n    {\r\n      title: '用户等级',\r\n      align: 'center',\r\n      dataIndex: 'type',\r\n      render: (...args) => {\r\n        const user = args[1]\r\n        let obj = {\r\n          '0': { color: 'green', label: '普通' },\r\n          '1': { color: 'yellow', label: '初级管理员' },\r\n          '2': { color: 'red', label: '高级管理员' },\r\n        }\r\n        const userType = getUserType(user)\r\n\r\n        let { color, label } = obj[userType]\r\n\r\n        return <Tag color={color}>{label}</Tag>\r\n      },\r\n    },\r\n    {\r\n      title: '状态',\r\n      align: 'center',\r\n      dataIndex: 'type',\r\n      render: audit => {\r\n        audit = 1\r\n        let obj = {\r\n          '-1': { color: 'red', label: '审核不通过' },\r\n          '0': { color: 'green', label: '审核中' },\r\n          '1': { color: 'geekblue', label: '审核通过' },\r\n        }\r\n        let { color, label } = (obj as any)[audit]\r\n        return <Tag color={color}>{label}</Tag>\r\n      },\r\n    },\r\n    {\r\n      title: '注册日期',\r\n      key: 'createdAt',\r\n      align: 'center',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => (\r\n        <Tag color=\"green\">{dayJs(createdAt).format('YYYY-MM-DD')}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: '操作',\r\n      dataIndex: 'actions',\r\n      key: 'actions',\r\n      align: 'center',\r\n      render: (...args) => {\r\n        const user = args[1] as UserData\r\n\r\n        return (\r\n          <Button.Group>\r\n            <Button danger ghost onClick={() => handleRemove(user._id)}>\r\n              删除\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              ghost\r\n              onClick={() => handleChangeLevel(user)}\r\n            >\r\n              更改等级\r\n            </Button>\r\n          </Button.Group>\r\n        )\r\n      },\r\n    },\r\n  ]\r\n\r\n  const handleChangeLevel = (user: UserData) => {\r\n    const { openModal, closeModal } = modalRef.current!\r\n    openModal('此操作会修改用户的权限!是否确认？', () => {\r\n      const command = window.prompt('请输入口令')?.trim()\r\n\r\n      if (command !== 'wei110349') {\r\n        closeModal()\r\n        return message.warning('口令错误')\r\n      }\r\n\r\n      const level = window\r\n        .prompt(\r\n          `请输入修改更改的类型：普通(${IUserType.common})|管理员(${IUserType.admin})|超级管理员(${IUserType.superAdmin})`,\r\n        )\r\n        ?.trim()\r\n\r\n      if (\r\n        level &&\r\n        level in [IUserType.common, IUserType.admin, IUserType.superAdmin]\r\n      ) {\r\n        changeLevel(user._id, level).then(res => {\r\n          const { code } = res.data\r\n          if (code === 200) {\r\n            toggleRefreshFlag(f => !f)\r\n            closeModal()\r\n          }\r\n        })\r\n      } else {\r\n        closeModal()\r\n        return message.warning('用户类型填写错误！')\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleRemove = (recordId: string) => {\r\n    const { openModal, closeModal } = modalRef.current!\r\n\r\n    openModal('确定要删除该用户吗', () => {\r\n      removeUser(recordId).then(res => {\r\n        const { code } = res.data\r\n        // 删除成功\r\n        if (code === 200) {\r\n          message.success('删除成功')\r\n          toggleRefreshFlag(f => !f)\r\n          closeModal()\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /** 获取表格数据 */\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetchUserList<UserData[]>().then(res => {\r\n      const { data } = res.data\r\n      setTableData(data)\r\n      setLoading(false)\r\n    })\r\n  }, [refreshFlag])\r\n\r\n  return (\r\n    <CommonPanel>\r\n      <Card title=\"用户列表\" className=\"panel-card\">\r\n        <CommonTableWra>\r\n          <Table\r\n            rowKey=\"_id\"\r\n            bordered\r\n            columns={columns}\r\n            size=\"middle\"\r\n            dataSource={tableData}\r\n            loading={isLoading}\r\n            pagination={pagination}\r\n            scroll={{ x: 900 }}\r\n            expandable={{\r\n              expandedRowRender: userInfo => (\r\n                <UserOtherInfo userInfo={userInfo} />\r\n              ),\r\n            }}\r\n          />\r\n        </CommonTableWra>\r\n      </Card>\r\n\r\n      {/* 公共弹框 */}\r\n      <CommonModal ref={modalRef} />\r\n    </CommonPanel>\r\n  )\r\n})\r\n\r\nexport default AccountList\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\bookmark-column\\index.tsx",["465","466","467"],"import { FC, useState, memo, useEffect, useRef, useMemo } from 'react'\r\nimport { Card, Button, Table, Tag, message } from 'antd'\r\nimport { MenuOutlined } from '@ant-design/icons'\r\nimport { ColumnsType } from 'antd/lib/table'\r\nimport arrayMove from 'array-move'\r\nimport {\r\n  SortableHandle,\r\n  SortableContainer,\r\n  SortableElement,\r\n} from 'react-sortable-hoc'\r\nimport CommonModal, { ImperativeProps } from '../../components/common-modal'\r\nimport { CommonPanel, CommonTableWra } from '../analyses/style'\r\nimport FormDrawer, {\r\n  FormDrawerFieldProps,\r\n  DrawerImperativeProps,\r\n} from '../../components/form-drawer'\r\nimport { WithCountResponseData } from '../../api/types'\r\nimport {\r\n  BookmarkColumnData,\r\n  createBookmarkColumn,\r\n  updateBookmarkColumn,\r\n  fetchBookmarkColumn,\r\n  removeBookmarkColumn,\r\n} from '../../api/bookmark'\r\nimport { getAntdIconByIconStr } from '../../utils/menu'\r\nimport useTablePagination from '../../hooks/use-table-pagination'\r\n\r\ninterface FormResult {\r\n  /** 书栏名称 */\r\n  name: string\r\n\r\n  /** 书栏图标 */\r\n  icon: string\r\n}\r\n\r\n/** 拖拽控制 */\r\nconst DragHandle = SortableHandle(() => (\r\n  <MenuOutlined style={{ cursor: 'pointer', color: '#999' }} />\r\n))\r\n\r\nconst SortableItem = SortableElement((props: any) => {\r\n  return <tr className=\"sortItem\" {...props} />\r\n})\r\nconst SortableWrapper = SortableContainer((props: any) => {\r\n  return <tbody className=\"sortWra\" {...props} />\r\n})\r\n\r\nconst BookmarkColumn: FC = memo(() => {\r\n  /** 表格数据 */\r\n  const [tableData, setTableData] = useState<BookmarkColumnData[]>([])\r\n\r\n  /** 获取表格数据加载状态 */\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  /** 重新获取数据标识 */\r\n  const [refreshFlag, toggleRefreshFlag] = useState(false)\r\n\r\n  /** 控制模态框 */\r\n  const modalRef = useRef<ImperativeProps>(null)\r\n\r\n  /** 分页配置 */\r\n  const [pagination, setPagination, afterRemove] = useTablePagination({\r\n    pageSize: 8,\r\n  })\r\n\r\n  const columns: ColumnsType<any> = [\r\n    {\r\n      title: '排序',\r\n      dataIndex: 'sort',\r\n      width: 66,\r\n      className: 'drag-visible',\r\n      align: 'center',\r\n      render: () => <DragHandle />,\r\n    },\r\n    {\r\n      title: '栏目名称',\r\n      align: 'center',\r\n      dataIndex: 'name',\r\n      ellipsis: true,\r\n      className: 'drag-visible',\r\n      key: 'name',\r\n      render: name => <Tag color=\"volcano\">{name}</Tag>,\r\n    },\r\n    {\r\n      title: '栏目图标',\r\n      key: 'icon',\r\n      align: 'center',\r\n      dataIndex: 'icon',\r\n      render: icon => (icon ? getAntdIconByIconStr(icon) : <span>-</span>),\r\n    },\r\n    {\r\n      title: '所含书签数',\r\n      key: 'bookmarks',\r\n      align: 'center',\r\n      dataIndex: 'bookmarks',\r\n      render: (bookmarks: any[]) => {\r\n        return <Tag>{bookmarks.length}</Tag>\r\n      },\r\n    },\r\n    {\r\n      title: '操作',\r\n      dataIndex: 'actions',\r\n      key: 'actions',\r\n      align: 'center',\r\n      render: (...args) => {\r\n        const record = args[1] as BookmarkColumnData\r\n\r\n        return (\r\n          <Button.Group>\r\n            <Button danger ghost onClick={() => handleRemove(record._id)}>\r\n              删除\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              ghost\r\n              onClick={() => handleShowDrawer(record)}\r\n            >\r\n              编辑\r\n            </Button>\r\n          </Button.Group>\r\n        )\r\n      },\r\n    },\r\n  ]\r\n\r\n  /** 抽屉框 */\r\n  const drawerRef = useRef<DrawerImperativeProps>(null)\r\n\r\n  /** 表单字段数据 */\r\n  const fields: FormDrawerFieldProps[] = useMemo(() => {\r\n    return [\r\n      { type: 'input', label: '书栏名称', name: 'name', value: '' },\r\n      { type: 'icon', label: '书栏图标', name: 'icon', value: '' },\r\n    ] as FormDrawerFieldProps[]\r\n  }, [])\r\n\r\n  /** 处理展示抽屉 */\r\n  const handleShowDrawer = (editItem: BookmarkColumnData | null) => {\r\n    drawerRef.current!.openDrawer(handleSubmit, editItem)\r\n  }\r\n\r\n  const handleRemove = (columnId: string) => {\r\n    const { openModal, closeModal } = modalRef.current!\r\n\r\n    openModal('删除该栏目，栏目对应的书签将会删除，是否确定?', () => {\r\n      removeBookmarkColumn(columnId).then(res => {\r\n        const { code } = res.data\r\n        // 删除成功\r\n        if (code === 200) {\r\n          message.success('删除成功')\r\n          afterRemove(tableData.length - 1)\r\n          toggleRefreshFlag(f => !f)\r\n          closeModal()\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /** 更改栏目索引 */\r\n  const exchangeColumnIndex = (oldIndex: number, newIndex: number) => {\r\n    if (oldIndex !== newIndex) {\r\n      const { _id: oldId, name: oldName } = tableData[oldIndex]!\r\n      const { _id: newId, name: newName } = tableData[newIndex]!\r\n      Promise.all([\r\n        updateBookmarkColumn(oldId, { index: newIndex }),\r\n        updateBookmarkColumn(newId, { index: oldIndex }),\r\n      ]).then(res => {\r\n        // if (res.every(v => v.data.code === 200)) {\r\n        //   console.log('修改成功')\r\n        // }\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (\r\n    result: FormResult,\r\n    editData: BookmarkColumnData | null,\r\n  ) => {\r\n    const { name, icon } = result\r\n\r\n    function afterSuccess(msg: string) {\r\n      message.success(msg)\r\n\r\n      toggleRefreshFlag(f => !f)\r\n\r\n      drawerRef.current!.closeDrawer()\r\n    }\r\n\r\n    if (editData) {\r\n      updateBookmarkColumn(editData._id, { name, icon }).then(() =>\r\n        afterSuccess('修改栏目成功'),\r\n      )\r\n    } else {\r\n      createBookmarkColumn({ name, icon }).then(() =>\r\n        afterSuccess('添加栏目成功'),\r\n      )\r\n    }\r\n  }\r\n\r\n  /** 获取表格数据 */\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetchBookmarkColumn<WithCountResponseData<BookmarkColumnData[]>>(\r\n      {} as any,\r\n    ).then(res => {\r\n      const {\r\n        data: { list, count },\r\n      } = res.data\r\n      setPagination(pagination => {\r\n        return {\r\n          ...pagination,\r\n          total: count,\r\n        }\r\n      })\r\n      setTableData(list)\r\n      setLoading(false)\r\n    })\r\n  }, [refreshFlag])\r\n\r\n  const extraButton = (\r\n    <Button\r\n      size=\"small\"\r\n      type=\"primary\"\r\n      ghost\r\n      onClick={() => handleShowDrawer(null)}\r\n    >\r\n      添加栏目\r\n    </Button>\r\n  )\r\n\r\n  const onSortEnd = (event: any) => {\r\n    const { oldIndex, newIndex } = event\r\n    console.log(oldIndex, newIndex)\r\n    if (oldIndex !== newIndex) {\r\n      const newData = arrayMove([...tableData], oldIndex, newIndex).filter(\r\n        el => !!el,\r\n      )\r\n      /** 修改真实数据 */\r\n      exchangeColumnIndex(oldIndex, newIndex)\r\n      setTableData(newData)\r\n    }\r\n  }\r\n\r\n  const DraggableContainer = (props: any) => (\r\n    <SortableWrapper\r\n      useDragHandle\r\n      disableAutoscroll\r\n      helperClass=\"row-dragging\"\r\n      onSortEnd={onSortEnd}\r\n      {...props}\r\n    />\r\n  )\r\n\r\n  const DraggableBodyRow = (props: any) => {\r\n    const { className, style, ...restProps } = props\r\n    // 函数findIndex基于表rowKey props，应该始终是一个正确的数组索引\r\n    const index = tableData.findIndex(x => x._id === restProps['data-row-key'])\r\n    return <SortableItem index={index} {...restProps} />\r\n  }\r\n\r\n  return (\r\n    <CommonPanel>\r\n      <Card title=\"栏目管理\" className=\"panel-card\" extra={extraButton}>\r\n        <CommonTableWra>\r\n          <Table\r\n            rowKey=\"_id\"\r\n            bordered\r\n            columns={columns}\r\n            size=\"middle\"\r\n            dataSource={tableData}\r\n            loading={isLoading}\r\n            pagination={pagination}\r\n            components={{\r\n              body: {\r\n                wrapper: DraggableContainer,\r\n                row: DraggableBodyRow,\r\n              },\r\n            }}\r\n            scroll={{ x: 900 }}\r\n          />\r\n        </CommonTableWra>\r\n      </Card>\r\n\r\n      {/* 公共弹框 */}\r\n      <CommonModal ref={modalRef} />\r\n\r\n      <FormDrawer baseTitle=\"栏目\" fields={fields} ref={drawerRef} />\r\n    </CommonPanel>\r\n  )\r\n})\r\n\r\nexport default BookmarkColumn\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\add-article\\index.tsx",["468","469","470"],"import { FC, useEffect, useState, ChangeEvent, useRef } from 'react'\r\nimport { Card, Row, Col, Form, Input, Select, Button, message } from 'antd'\r\nimport { RouteConfigComponentProps } from 'react-router-config'\r\nimport { CommonPanel } from '../analyses/style'\r\nimport { IRoute } from '../../routes/types'\r\nimport useInputValue from '../../hooks/use-input-value'\r\nimport {\r\n  fetchArticleDesc,\r\n  addArticle,\r\n  AddArticleParams,\r\n  editArticle,\r\n} from '../../api/article'\r\nimport { fetchTags } from '../../api/tag'\r\nimport { fetchCategories } from '../../api/category'\r\n\r\nimport SimpleUpload from '../../components/simple-upload'\r\nimport SimpEditor, { EditorImperativeProps } from '../../components/editor'\r\nimport config from '../../config'\r\nimport { combineURL } from '../../utils/tool'\r\nimport { handleValidatorFields } from '../../utils/validator'\r\nimport { CategoryData } from '../category-admin'\r\nconst { Option } = Select\r\n\r\n/** 文章发布状态 */\r\nexport enum ArticleStatus {\r\n  /** 已发布 */\r\n  published = '1',\r\n\r\n  /** 草稿 */\r\n  draft = '0',\r\n}\r\n\r\nexport interface TagData {\r\n  _id: string\r\n  name: string\r\n}\r\n\r\nexport interface ArticleData {\r\n  author: string\r\n  category: CategoryData\r\n  completed: boolean\r\n  contentHTML: string\r\n  contentMD: string\r\n  createdAt: string\r\n  status: ArticleStatus\r\n  summary: string\r\n  tags: TagData[]\r\n  title: string\r\n  traitImg: string\r\n  _id: string\r\n}\r\n\r\nconst AddArticle: FC = (props: any) => {\r\n  const { match, route, history } = props as RouteConfigComponentProps\r\n\r\n  const [editId, setEditId] = useState<null | string>(null)\r\n\r\n  const [editArticleData, setEditArticle] = useState<null | ArticleData>(null)\r\n\r\n  /** 所有分类 */\r\n  const [categories, setCategories] = useState<CategoryData[]>([])\r\n\r\n  /** 所有标签 */\r\n  const [allTags, setAllTags] = useState<TagData[]>([])\r\n\r\n  /** 文章标题 */\r\n  const [title, setTitle, handleTitleChange] = useInputValue('')\r\n\r\n  /** 文章作者 */\r\n  const [author, setAuthor, handleAuthorChange] = useInputValue('')\r\n\r\n  /** 文章总结 */\r\n  const [summary, setSummary, handleSummaryChange] = useInputValue('')\r\n\r\n  /** 文章特色图片，存储图标地址 */\r\n  const [traitImg, setTraitImg] = useState('')\r\n\r\n  /** 文章分类，存放分类id */\r\n  const [category, setCategory] = useState('')\r\n\r\n  /** 文章标签，存放标签id集合 */\r\n  const [tags, setTags] = useState<string[]>([])\r\n\r\n  /** 完成状态 */\r\n  const [completed, setCompleted] = useState<'true' | 'false'>('true')\r\n\r\n  /** 编辑器 */\r\n  const editorRef = useRef<EditorImperativeProps>(null)\r\n\r\n  useEffect(() => {\r\n    const { id } = match.params as any\r\n    id && setEditId(id)\r\n  })\r\n\r\n  /** 获取分类 / 标签数据数据 */\r\n  useEffect(() => {\r\n    // fetchCategories<CategoryData[]>().then(res => {\r\n    //   const { data } = res.data\r\n    //   setCategories(data)\r\n    // })fetchTags\r\n    Promise.all([\r\n      fetchCategories<CategoryData[]>(),\r\n      fetchTags<TagData[]>(),\r\n    ]).then(([categoriesRes, tagRes]) => {\r\n      setCategories(categoriesRes.data.data)\r\n      setAllTags(tagRes.data.data)\r\n    })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (editId === null) return\r\n    /** 获取编辑文章数据的 */\r\n    fetchArticleDesc<ArticleData>(editId).then(res => {\r\n      const { data } = res.data\r\n      setEditArticle(data)\r\n    })\r\n  }, [editId])\r\n\r\n  useEffect(() => {\r\n    if (editArticleData === null) return\r\n    /** 重新赋值 */\r\n    setTitle(editArticleData.title)\r\n    setAuthor(editArticleData.author)\r\n    setSummary(editArticleData.summary)\r\n    setTraitImg(editArticleData.traitImg)\r\n    setCategory(editArticleData.category._id)\r\n    setTags(editArticleData.tags.map(tag => tag._id))\r\n    setCompleted(String(editArticleData.completed) as 'true' | 'false')\r\n    setTraitImg(editArticleData.traitImg)\r\n    editorRef.current?.setEditorInner(editArticleData.contentMD)\r\n  }, [editArticleData, editorRef.current])\r\n\r\n  /** 处理提交 */\r\n  const handleSubmit = () => {\r\n    const { html, text } = editorRef.current!.getEditorInner()\r\n\r\n    /** 验证字段 */\r\n    const validatorResult = handleValidatorFields([\r\n      { value: title, msg: '请先填入文章标题' },\r\n      { value: text || html, msg: '请先填入文章内容' },\r\n      { value: summary, msg: '请先填入文章总结' },\r\n      { value: author, msg: '请先填入文章作者' },\r\n      { value: category, msg: '请先选择文章分类' },\r\n    ])\r\n    if (validatorResult === false) return\r\n\r\n    const formParams: AddArticleParams = {\r\n      completed: completed === 'true',\r\n      title,\r\n      author,\r\n      summary,\r\n      contentHTML: html,\r\n      contentMD: text,\r\n      category,\r\n      tags,\r\n      traitImg,\r\n    }\r\n\r\n    if (editId) {\r\n      editArticle(editId, formParams).then(res => {\r\n        const { msg } = res.data\r\n        message.success(msg)\r\n        // history.push(combineURL(config.BASENAME, '/article/list'))\r\n        history.replace(combineURL(config.BASENAME, '/article/list'))\r\n      })\r\n    } else {\r\n      addArticle(formParams).then(res => {\r\n        const { msg } = res.data\r\n        message.success(msg)\r\n        history.push(combineURL(config.BASENAME, '/article/list'))\r\n      })\r\n    }\r\n  }\r\n\r\n  const renderHeaderTitle = () => {\r\n    const { meta } = route as IRoute\r\n\r\n    return <span style={{ fontSize: '24px' }}>{meta.title}</span>\r\n  }\r\n\r\n  return (\r\n    <CommonPanel customPadding>\r\n      <Card title={renderHeaderTitle()} bordered={false}>\r\n        <Form layout=\"vertical\">\r\n          <Row justify=\"space-between\">\r\n            <Col xs={24} xl={18}>\r\n              <Form.Item label=\"文章标题\">\r\n                <Input\r\n                  size=\"large\"\r\n                  value={title}\r\n                  onChange={handleTitleChange}\r\n                  placeholder=\"请输入标题\"\r\n                />\r\n              </Form.Item>\r\n\r\n              <Form.Item label=\"文章主体\">\r\n                <SimpEditor ref={editorRef} />\r\n              </Form.Item>\r\n\r\n              <Form.Item label=\"文章总结\">\r\n                <Input\r\n                  size=\"large\"\r\n                  value={summary}\r\n                  onChange={handleSummaryChange}\r\n                  placeholder=\"请输入文章总结\"\r\n                />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col xs={24} xl={{ span: 5, offset: 1 }}>\r\n              <Form.Item label=\"作者\">\r\n                <Input\r\n                  placeholder=\"请输入作者\"\r\n                  value={author}\r\n                  onChange={handleAuthorChange}\r\n                />\r\n              </Form.Item>\r\n\r\n              <Form.Item label=\"特色图片\">\r\n                <SimpleUpload filepath={traitImg} setFilePath={setTraitImg} />\r\n              </Form.Item>\r\n\r\n              <Form.Item label=\"分类\">\r\n                <Select\r\n                  value={category}\r\n                  onChange={setCategory}\r\n                  placeholder=\"请选择分类\"\r\n                >\r\n                  {categories.map(option => (\r\n                    <Option key={option._id} value={option._id}>\r\n                      {option.name}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n\r\n              <Form.Item label=\"标签\">\r\n                <Select\r\n                  value={tags}\r\n                  onChange={setTags}\r\n                  mode=\"tags\"\r\n                  placeholder=\"请选择标签\"\r\n                >\r\n                  {allTags.map(option => (\r\n                    <Option key={option._id} value={option._id}>\r\n                      {option.name}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n\r\n              <Form.Item label=\"完成状态\">\r\n                <Select\r\n                  value={completed}\r\n                  onChange={setCompleted}\r\n                  placeholder=\"请选择状态\"\r\n                >\r\n                  <Option value={'true'}>发布</Option>\r\n                  <Option value={'false'}>草稿</Option>\r\n                </Select>\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button type=\"primary\" onClick={handleSubmit}>\r\n                  {editId ? '保存' : '发表'}\r\n                </Button>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n      </Card>\r\n    </CommonPanel>\r\n  )\r\n}\r\n\r\nexport default AddArticle\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\album-admin\\index.tsx",["471","472"],"import { FC, memo, useRef, useState, useEffect } from 'react'\r\nimport { Button, Card, message, Table, Tag, Image } from 'antd'\r\nimport { ColumnsType, TablePaginationConfig } from 'antd/lib/table'\r\nimport dayJs from 'dayjs'\r\nimport CommonModal, { ImperativeProps } from '../../components/common-modal'\r\nimport { CommonPanel, CommonTableWra } from '../analyses/style'\r\nimport FormDrawer, {\r\n  FormDrawerFieldProps,\r\n  DrawerImperativeProps,\r\n} from '../../components/form-drawer'\r\nimport useTablePagination from '../../hooks/use-table-pagination'\r\nimport {\r\n  createAlbum,\r\n  removeAlbum,\r\n  updateAlbum,\r\n  fetchAlbums,\r\n  CreateAlbumParams,\r\n} from '../../api/album'\r\n\r\nimport { WithCountResponseData } from '../../api/types'\r\n\r\ninterface AlbumData extends CreateAlbumParams {\r\n  _id: string\r\n}\r\n\r\ninterface FormResult extends CreateAlbumParams {}\r\n\r\nexport const fallbackImg =\r\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=='\r\n\r\nconst AlbumAdmin: FC = memo(() => {\r\n  /** 表格数据 */\r\n  const [tableData, setTableData] = useState<AlbumData[]>([])\r\n\r\n  /** 获取表格数据加载状态 */\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  /** 重新获取数据标识 */\r\n  const [refreshFlag, toggleRefreshFlag] = useState(false)\r\n\r\n  /** 控制模态框 */\r\n  const modalRef = useRef<ImperativeProps>(null)\r\n\r\n  /** 抽屉框 */\r\n  const drawerRef = useRef<DrawerImperativeProps>(null)\r\n\r\n  const columns: ColumnsType<any> = [\r\n    {\r\n      title: '图景',\r\n      align: 'center',\r\n      dataIndex: 'prospect',\r\n      key: 'prospect',\r\n      render: src => {\r\n        return <Image width={64} height={64} src={src} fallback={fallbackImg} />\r\n      },\r\n    },\r\n    {\r\n      title: '备注',\r\n      align: 'center',\r\n      dataIndex: 'remark',\r\n      render: remark => <Tag color=\"volcano\">{remark}</Tag>,\r\n    },\r\n\r\n    {\r\n      title: '添加时间',\r\n      align: 'center',\r\n      key: 'createdAt',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => (\r\n        <Tag color=\"green\">{dayJs(createdAt).format('YYYY-MM-DD')}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: '操作',\r\n      dataIndex: 'actions',\r\n      key: 'actions',\r\n      align: 'center',\r\n      render: (...args) => {\r\n        const album = args[1] as AlbumData\r\n\r\n        return (\r\n          <Button.Group>\r\n            <Button danger ghost onClick={() => handleRemove(album._id)}>\r\n              删除\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              ghost\r\n              onClick={() => handleShowDrawer(album)}\r\n            >\r\n              编辑\r\n            </Button>\r\n          </Button.Group>\r\n        )\r\n      },\r\n    },\r\n  ]\r\n\r\n  /** 表单字段数据 */\r\n  const fields: FormDrawerFieldProps[] = [\r\n    { type: 'upload', label: '图景', name: 'prospect', value: '' },\r\n    { type: 'input', label: '备注', name: 'remark', value: '', rules: [] },\r\n  ]\r\n\r\n  /** 分页设置 */\r\n  const [pagination, setPagination, afterRemove] = useTablePagination({\r\n    pageSize: 5,\r\n  })\r\n\r\n  /** 处理展示抽屉 */\r\n  const handleShowDrawer = (editItem?: AlbumData) => {\r\n    drawerRef.current!.openDrawer(handleSubmit, editItem)\r\n  }\r\n\r\n  const handleRemove = (albumId: string) => {\r\n    const { openModal, closeModal } = modalRef.current!\r\n\r\n    openModal('您确定要删除吗?', () => {\r\n      removeAlbum(albumId).then(res => {\r\n        const { code } = res.data\r\n        // 删除成功\r\n        if (code === 200) {\r\n          message.success('删除成功')\r\n          toggleRefreshFlag(f => !f)\r\n\r\n          afterRemove(tableData.length - 1)\r\n          closeModal()\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /** 处理提交 */\r\n  const handleSubmit = (result: FormResult, editData: AlbumData | null) => {\r\n    function afterSuccess(msg: string) {\r\n      message.success(msg)\r\n      toggleRefreshFlag(f => !f)\r\n\r\n      drawerRef.current!.closeDrawer()\r\n    }\r\n\r\n    if (editData) {\r\n      updateAlbum(editData._id, result).then(() => afterSuccess('修改相册成功'))\r\n    } else {\r\n      createAlbum(result).then(() => afterSuccess('添加相册成功'))\r\n    }\r\n  }\r\n\r\n  /** 获取表格数据 */\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetchAlbums<WithCountResponseData<AlbumData[]>>({\r\n      pageNum: pagination.current,\r\n      pageSize: pagination.pageSize,\r\n    }).then(res => {\r\n      const { count, list } = res.data.data\r\n      setTableData(list)\r\n      setPagination(pagination => ({\r\n        ...pagination,\r\n        total: count, //data.length\r\n      }))\r\n      setLoading(false)\r\n    })\r\n  }, [refreshFlag, pagination.current, pagination.pageSize])\r\n\r\n  const extraButton = (\r\n    <Button\r\n      size=\"small\"\r\n      type=\"primary\"\r\n      ghost\r\n      onClick={() => handleShowDrawer()}\r\n    >\r\n      添加相册\r\n    </Button>\r\n  )\r\n\r\n  return (\r\n    <CommonPanel>\r\n      <Card title=\"相册管理\" className=\"panel-card\" extra={extraButton}>\r\n        <CommonTableWra>\r\n          <Table\r\n            rowKey=\"_id\"\r\n            bordered\r\n            columns={columns}\r\n            size=\"middle\"\r\n            dataSource={tableData}\r\n            loading={isLoading}\r\n            scroll={{ x: 900 }}\r\n            pagination={pagination}\r\n          />\r\n        </CommonTableWra>\r\n      </Card>\r\n\r\n      {/* 公共弹框 */}\r\n      <CommonModal ref={modalRef} />\r\n\r\n      <FormDrawer baseTitle=\"相册\" fields={fields} ref={drawerRef} />\r\n    </CommonPanel>\r\n  )\r\n})\r\n\r\nexport default AlbumAdmin\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\menu-list\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\analyses\\index.tsx",["473"],"import { FC, memo, useState, useEffect, useMemo } from 'react'\r\nimport { Card, Empty, Row, Col, Statistic, Button } from 'antd'\r\nimport {\r\n  ReadOutlined,\r\n  ProfileOutlined,\r\n  FileDoneOutlined,\r\n  TagOutlined,\r\n} from '@ant-design/icons'\r\nimport { Link } from 'react-router-dom'\r\nimport { Column, Pie, Line, Bar } from '@ant-design/charts'\r\nimport { PieConfig } from '@ant-design/charts/lib/pie'\r\nimport { ColumnConfig } from '@ant-design/charts/lib/column'\r\nimport { BarConfig } from '@ant-design/charts/lib/bar'\r\nimport { TopItem } from './style'\r\nimport globalStyle from '../../styles/global-style'\r\nimport { IStoreState } from '../../store/types'\r\nimport { IUserType } from '../../store/module/user/reducer'\r\nimport { useSelector } from 'react-redux'\r\nimport {\r\n  fetchTopCardData,\r\n  TopCardResponseData,\r\n  fetchArticleGroupData,\r\n  ArticleGroupResponseData,\r\n  fetchUserArticleData,\r\n  UserArticleResponseData,\r\n} from '../../api/analyse'\r\n\r\n// import TweenOne from 'rc-tween-one'\r\n// //@ts-ignore\r\n// import Children from 'rc-tween-one/lib/plugin/ChildrenPlugin'\r\n\r\n/** 顶部卡片 */\r\nconst TopCard: FC = memo(props => {\r\n  const [isLoading, setLoading] = useState(true)\r\n  const [topData, setTopData] = useState<TopCardResponseData>(\r\n    {} as TopCardResponseData,\r\n  )\r\n  /** 待办比率 */\r\n  const todoRate = useMemo(() => {\r\n    if (!topData.todo) return\r\n\r\n    return `${topData.todo.done} / ${topData.todo.total}`\r\n  }, [topData.todo])\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetchTopCardData().then(res => {\r\n      const { data } = res.data\r\n      setTopData(data)\r\n      setLoading(false)\r\n    })\r\n  }, [])\r\n\r\n  const animation = topData.article\r\n    ? null\r\n    : {\r\n        Children: {\r\n          value: 10000,\r\n          floatLength: 2,\r\n        },\r\n        duration: 1000,\r\n      }\r\n\r\n  return (\r\n    <>\r\n      <Col xs={24} md={12} xl={6}>\r\n        <TopItem iconColor={globalStyle['theme-color']}>\r\n          <div className=\"iconWra\">\r\n            <ReadOutlined />\r\n          </div>\r\n          <div className=\"description\">\r\n            {/* <TweenOne animation={{ x: 100 }}>\r\n              {' '}\r\n              <div key=\"0\">demo</div>\r\n            </TweenOne> */}\r\n            <Statistic\r\n              title=\"文章篇数\"\r\n              value={topData.article}\r\n              loading={isLoading}\r\n            />\r\n          </div>\r\n        </TopItem>\r\n      </Col>\r\n      <Col xs={24} md={12} xl={6}>\r\n        <TopItem iconColor=\"#F4516C\">\r\n          <div className=\"iconWra\">\r\n            <ProfileOutlined />\r\n          </div>\r\n          <div className=\"description\">\r\n            <Statistic title=\"待办项目\" value={todoRate} loading={isLoading} />\r\n          </div>\r\n        </TopItem>\r\n      </Col>\r\n\r\n      <Col xs={24} md={12} xl={6}>\r\n        <TopItem iconColor=\"#36A3F7\">\r\n          <div className=\"iconWra\">\r\n            <FileDoneOutlined />\r\n          </div>\r\n          <div className=\"description\">\r\n            <Statistic\r\n              title=\"记录行数\"\r\n              value={topData.record}\r\n              loading={isLoading}\r\n            />\r\n          </div>\r\n        </TopItem>\r\n      </Col>\r\n      <Col xs={24} md={12} xl={6}>\r\n        <TopItem iconColor=\"#40C9C6\">\r\n          <div className=\"iconWra\">\r\n            <TagOutlined />\r\n          </div>\r\n          <div className=\"description\">\r\n            <Statistic\r\n              title=\"书签个数\"\r\n              value={topData.bookmark}\r\n              loading={isLoading}\r\n            />\r\n          </div>\r\n        </TopItem>\r\n      </Col>\r\n    </>\r\n  )\r\n})\r\n\r\n/** 增长效果 */\r\nconst IncrementLine: FC = memo(props => {\r\n  const [data, setData] = useState([])\r\n  const [isLoading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetch(\r\n      'https://gw.alipayobjects.com/os/bmw-prod/e00d52f4-2fa6-47ee-a0d7-105dd95bde20.json',\r\n    )\r\n      .then(response => response.json())\r\n      .then(json => {\r\n        setData(json)\r\n        setLoading(false)\r\n      })\r\n      .catch(error => {\r\n        console.log('fetch data failed', error)\r\n      })\r\n  }, [])\r\n\r\n  const lineConfig = {\r\n    data: data,\r\n    xField: 'year',\r\n    yField: 'gdp',\r\n    seriesField: 'name',\r\n    yAxis: {\r\n      label: {\r\n        formatter: function formatter(v: any) {\r\n          return ''.concat((v / 1000000000).toFixed(1), ' B')\r\n        },\r\n      },\r\n    },\r\n    legend: { position: 'top' },\r\n    smooth: true,\r\n    animation: {\r\n      appear: {\r\n        animation: 'path-in',\r\n        duration: 1500,\r\n      },\r\n    },\r\n  }\r\n  return (\r\n    <Col span={24}>\r\n      <Card bordered={false} loading={isLoading}>\r\n        <Line {...(lineConfig as any)} />\r\n      </Card>\r\n    </Col>\r\n  )\r\n})\r\n\r\n/** 文章组情况 */\r\nconst ArticleGroup: FC = memo(props => {\r\n  const [groupData, setGroupData] = useState<ArticleGroupResponseData>({\r\n    column: [],\r\n    pie: [],\r\n  })\r\n\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetchArticleGroupData().then(res => {\r\n      const { data } = res.data\r\n      setGroupData(data)\r\n      setLoading(false)\r\n    })\r\n  }, [])\r\n\r\n  var columnConfig: ColumnConfig = {\r\n    data: groupData.column,\r\n    xField: 'category',\r\n    yField: 'count',\r\n    isStack: true,\r\n    seriesField: 'type',\r\n    label: {\r\n      position: 'middle',\r\n      style: {\r\n        fill: '#FFFFFF',\r\n        opacity: 0.6,\r\n      },\r\n    },\r\n    meta: {\r\n      category: { alias: '类别' },\r\n      count: { alias: '文章量' },\r\n    },\r\n  }\r\n\r\n  const pieConfig: PieConfig = {\r\n    data: groupData.pie,\r\n    appendPadding: 10,\r\n    angleField: 'count',\r\n    colorField: 'category',\r\n    radius: 0.8,\r\n    legend: false,\r\n    label: {\r\n      type: 'outer',\r\n      content: '{name} {percentage}',\r\n    },\r\n    interactions: [{ type: 'pie-legend-active' }, { type: 'element-active' }],\r\n  }\r\n\r\n  /** 如果获取了数据，但是没有文章数据，我们提示用户 */\r\n  if (isLoading === false && groupData.pie.length === 0) {\r\n    return (\r\n      <Col xs={24}>\r\n        <Card title=\"我的文章分布\">\r\n          <Empty\r\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\r\n            description=\"您还没有文章数据，快去编写文章查看啦~\"\r\n          >\r\n            <Button>\r\n              <Link to=\"/article/add\" replace>\r\n                创建文章\r\n              </Link>\r\n            </Button>\r\n          </Empty>\r\n        </Card>\r\n      </Col>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Col xs={24} md={16}>\r\n        <Card\r\n          title=\"我的文章分布\"\r\n          bodyStyle={{ height: 500 }}\r\n          bordered={false}\r\n          loading={isLoading}\r\n        >\r\n          <Column {...columnConfig} />\r\n        </Card>\r\n      </Col>\r\n      <Col xs={24} md={8}>\r\n        <Card\r\n          title=\"我的文章分布\"\r\n          bordered={false}\r\n          bodyStyle={{ height: 500 }}\r\n          loading={isLoading}\r\n        >\r\n          <Pie {...pieConfig} />\r\n        </Card>\r\n      </Col>\r\n    </>\r\n  )\r\n})\r\n\r\n/** 用户文章 */\r\nconst UserArticle: FC = memo(props => {\r\n  const [userArticleData, setUserArticleData] = useState<\r\n    UserArticleResponseData[]\r\n  >([])\r\n\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  const config: BarConfig = {\r\n    data: userArticleData,\r\n    xField: 'total',\r\n    yField: 'account',\r\n    // yAxis: {\r\n    //   label: {\r\n    //     formatter(v: any) {\r\n    //       console.log(v)\r\n    //       return 'xxx'\r\n    //     },\r\n    //   },\r\n    // },\r\n    seriesField: 'account',\r\n    legend: false,\r\n    meta: {\r\n      type: { alias: '用户账号' },\r\n      total: { alias: '发布文章数' },\r\n    },\r\n  }\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetchUserArticleData().then(res => {\r\n      const { data } = res.data\r\n      setUserArticleData(data)\r\n      setLoading(false)\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <Col span={24}>\r\n      <Card bordered={false} title=\"用户文章发表概览\" loading={isLoading}>\r\n        <Bar {...config} />\r\n      </Card>\r\n    </Col>\r\n  )\r\n})\r\n\r\nconst Analyses: FC = memo((props: any) => {\r\n  const role = useSelector<IStoreState, IUserType>(state => state.user.role)\r\n\r\n  return (\r\n    <div>\r\n      <Row gutter={[16, 16]}>\r\n        <TopCard />\r\n        <ArticleGroup />\r\n        <IncrementLine />\r\n        {role === IUserType.superAdmin && <UserArticle />}\r\n      </Row>\r\n    </div>\r\n  )\r\n})\r\nexport default Analyses\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\bookmark-collect\\index.tsx",["474","475","476","477","478"],"import {\r\n  FC,\r\n  useRef,\r\n  useState,\r\n  useEffect,\r\n  memo,\r\n  useMemo,\r\n  useCallback,\r\n  ReactNode,\r\n  CSSProperties,\r\n} from 'react'\r\nimport { Row, Col, Image, Button, message, Skeleton } from 'antd'\r\nimport { ColProps } from 'antd/lib/col'\r\nimport CommonModal, { ImperativeProps } from '../../components/common-modal'\r\nimport {\r\n  PlusOutlined,\r\n  EllipsisOutlined,\r\n  ExportOutlined,\r\n  DownloadOutlined,\r\n} from '@ant-design/icons'\r\nimport { BookmarkContainer, BookmarkCard, BookmarkColumnWra } from './style'\r\nimport { getAntdIconByIconStr } from '../../utils/menu'\r\nimport FormDrawer, {\r\n  FormDrawerFieldProps,\r\n  DrawerImperativeProps,\r\n} from '../../components/form-drawer'\r\nimport {\r\n  BookmarkData,\r\n  BookmarkColumnData,\r\n  fetchColumnWithMark,\r\n  createBookmarkColumn,\r\n  updateBookmarkColumn,\r\n  createBookmark,\r\n  removeBookmark,\r\n  updateBookmark,\r\n} from '../../api/bookmark'\r\nimport useClickOutSide from '../../hooks/use-click-outside'\r\nimport { fallbackImg } from '../album-admin'\r\nimport { contentToFile } from '../../utils/file'\r\n\r\n/** 展示弹框函数 */\r\ninterface ShowDrawerFunc {\r\n  (\r\n    type: 'bookmarkColumn' | 'bookmark',\r\n    editItem: any | null,\r\n    bookmarkColumn?: BookmarkColumnData,\r\n  ): void\r\n}\r\n\r\n/** 栅格属性 */\r\nconst colProps: ColProps = {\r\n  xs: 24,\r\n  sm: 8,\r\n  xl: 6,\r\n  xxl: 4,\r\n}\r\n\r\ninterface BookmarkItemProps {\r\n  bookmark: BookmarkData\r\n  showDrawer: ShowDrawerFunc\r\n  removeMark: (bookmarkId: string) => void\r\n}\r\n\r\nconst BookmarkItem: FC<BookmarkItemProps> = memo(props => {\r\n  const { bookmark, showDrawer, removeMark } = props\r\n\r\n  const { label, url, cover, _id } = bookmark\r\n\r\n  /** 是否展示浮层 */\r\n  const [showLayer, setShowLayer] = useState(false)\r\n\r\n  const bookmarkCardRef = useRef<HTMLElement>(null)\r\n\r\n  /** 点击其他区域，如果当前蒙层是打开的那么就关闭它 */\r\n  useClickOutSide(bookmarkCardRef, () => {\r\n    if (showLayer) {\r\n      setShowLayer(false)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <Col {...colProps}>\r\n      <BookmarkCard ref={bookmarkCardRef}>\r\n        <Image\r\n          className=\"cover\"\r\n          preview={false}\r\n          src={cover}\r\n          alt={label}\r\n          fallback={fallbackImg}\r\n        />\r\n        <p className=\"label\">\r\n          <a href={url} target=\"_blank\">\r\n            {label}\r\n          </a>\r\n        </p>\r\n\r\n        {/* 浮层控件 */}\r\n        <EllipsisOutlined\r\n          className=\"trigger-layer\"\r\n          onClick={() => setShowLayer(true)}\r\n        />\r\n\r\n        {/* 浮层 */}\r\n        {showLayer && (\r\n          <div className=\"layer\">\r\n            <Button type=\"primary\" danger block onClick={() => removeMark(_id)}>\r\n              删除\r\n            </Button>\r\n            {/* TODO */}\r\n            <Button block onClick={() => showDrawer('bookmark', bookmark)}>\r\n              编辑\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </BookmarkCard>\r\n    </Col>\r\n  )\r\n})\r\n\r\ninterface BookmarkColumnProps {\r\n  column: BookmarkColumnData\r\n  showDrawer: ShowDrawerFunc\r\n  removeMark: (bookmarkId: string) => void\r\n}\r\n\r\nconst BookmarkColumn: FC<BookmarkColumnProps> = memo(props => {\r\n  const { column, showDrawer, removeMark } = props\r\n\r\n  const { name, bookmarks, icon } = column\r\n\r\n  const showDrawerWithColumnData = useCallback<ShowDrawerFunc>(\r\n    (type, editItem) => {\r\n      showDrawer(type, editItem, column)\r\n    },\r\n    [column],\r\n  )\r\n\r\n  const iconNode = useMemo(() => getAntdIconByIconStr(icon), [icon])\r\n\r\n  return (\r\n    <BookmarkColumnWra>\r\n      <div className=\"header\">\r\n        <div className=\"column-info\">\r\n          <span className=\"icon\">{iconNode}</span>\r\n          <span className=\"name\">{name}</span>\r\n        </div>\r\n        <span onClick={() => showDrawer('bookmarkColumn', column)}>\r\n          编辑书栏\r\n        </span>\r\n      </div>\r\n      <Row gutter={[16, 16]}>\r\n        {bookmarks.map(bookmark => (\r\n          <BookmarkItem\r\n            key={bookmark._id}\r\n            removeMark={removeMark}\r\n            showDrawer={showDrawerWithColumnData}\r\n            bookmark={bookmark}\r\n          />\r\n        ))}\r\n\r\n        {/* 添加书签 */}\r\n        <Col\r\n          {...colProps}\r\n          onClick={() => showDrawerWithColumnData('bookmark', null)}\r\n        >\r\n          <BookmarkCard>\r\n            <PlusOutlined className=\"plus\" size={60} />\r\n          </BookmarkCard>\r\n        </Col>\r\n      </Row>\r\n    </BookmarkColumnWra>\r\n  )\r\n})\r\n\r\nconst BookmarkCollect: FC = memo(() => {\r\n  /** 书签栏目 */\r\n  const [bookmarkColumns, setColumns] = useState<BookmarkColumnData[]>([])\r\n\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  /** 第一次进场动画 */\r\n  const [enterLoading, setEnterLoading] = useState(true)\r\n\r\n  /** 弹框展示，数据不更新问题 (原因 useRef更改不会更新视图) */\r\n  const [refBug, setRefBug] = useState(false)\r\n\r\n  /** 控制模态框 */\r\n  const modalRef = useRef<ImperativeProps>(null)\r\n\r\n  /** 抽屉框 */\r\n  const drawerRef = useRef<DrawerImperativeProps>(null)\r\n\r\n  /** 抽屉操作类型 */\r\n  const drawerActionType = useRef<'bookmarkColumn' | 'bookmark'>('bookmark')\r\n\r\n  /** 重新获取数据标识 */\r\n  const [refreshFlag, toggleRefreshFlag] = useState(false)\r\n\r\n  /** 所属栏目 */\r\n  const belongColumn = useRef<BookmarkColumnData | null>(null)\r\n\r\n  /** 表单字段数据 */\r\n  const fields: FormDrawerFieldProps[] = useMemo(() => {\r\n    if (drawerActionType.current === 'bookmarkColumn') {\r\n      return [\r\n        { type: 'input', label: '书栏名称', name: 'name', value: '' },\r\n        { type: 'icon', label: '书栏图标', name: 'icon', value: '' },\r\n      ] as FormDrawerFieldProps[]\r\n    }\r\n\r\n    return [\r\n      { type: 'input', label: '书签标题', name: 'label', value: '' },\r\n      {\r\n        type: 'upload',\r\n        label: '书签封面',\r\n        name: 'cover',\r\n        value: '',\r\n        rules: [],\r\n      },\r\n      { type: 'input', label: '书签地址', name: 'url', value: '' },\r\n    ] as FormDrawerFieldProps[]\r\n  }, [drawerActionType.current])\r\n\r\n  /** 处理展示抽屉 */\r\n  const handleShowDrawer = useCallback<ShowDrawerFunc>(\r\n    function (type, editItem, bookmarkColumn) {\r\n      /** 改变抽屉表单字段类型 */\r\n      drawerActionType.current = type\r\n\r\n      /** 设置所属书栏 */\r\n      belongColumn.current = type === 'bookmark' ? bookmarkColumn! : null\r\n\r\n      /** 展示弹框 */\r\n      drawerRef.current!.openDrawer(handleSubmit, editItem)\r\n\r\n      setRefBug(f => !f)\r\n    },\r\n    [drawerActionType.current],\r\n  )\r\n\r\n  const handleSubmit = (result: any, editData: any | null) => {\r\n    function afterSuccess(msg: string) {\r\n      message.success(msg)\r\n\r\n      toggleRefreshFlag(f => !f)\r\n\r\n      drawerRef.current!.closeDrawer()\r\n    }\r\n\r\n    /** 如果是书栏的添加与编辑，反之书签 */\r\n    if (drawerActionType.current === 'bookmarkColumn') {\r\n      /** 如果是编辑 */\r\n      if (editData) {\r\n        updateBookmarkColumn(editData._id, result).then(res => {\r\n          const { code } = res.data\r\n          if (code === 200) {\r\n            afterSuccess('编辑书栏成功')\r\n          }\r\n        })\r\n      } else {\r\n        createBookmarkColumn(result).then(res => {\r\n          const { code } = res.data\r\n          if (code === 200) {\r\n            afterSuccess('添加书栏成功')\r\n          }\r\n        })\r\n      }\r\n    } else {\r\n      /** 对书签操作，我们拿到所属书栏 */\r\n      const { _id: columnId, bookmarks } = belongColumn.current!\r\n\r\n      if (editData) {\r\n        updateBookmark(editData._id, result).then(res => {\r\n          const { code } = res.data\r\n          if (code === 200) {\r\n            afterSuccess('编辑书签成功')\r\n          }\r\n        })\r\n      } else {\r\n        createBookmark({\r\n          column: columnId,\r\n          index: bookmarks.length,\r\n          ...result,\r\n        }).then(res => {\r\n          const { code } = res.data\r\n          if (code === 200) {\r\n            afterSuccess('添加书签成功')\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleRemove = useCallback((bookmarkId: string) => {\r\n    const { openModal, closeModal } = modalRef.current!\r\n\r\n    openModal('确定要删除该书签吗?', () => {\r\n      removeBookmark(bookmarkId)\r\n        .then(res => {\r\n          const { code } = res.data\r\n          // 删除成功\r\n          if (code === 200) {\r\n            message.success('删除成功')\r\n            toggleRefreshFlag(f => !f)\r\n            closeModal()\r\n          }\r\n        })\r\n        .catch(err => {\r\n          closeModal()\r\n        })\r\n    })\r\n  }, [])\r\n\r\n  /** 导入书签 */\r\n  const inputBookmark = () => {\r\n    console.log(message.info('此功能暂未开发~'))\r\n    // contentToFile('bookmark.json', JSON.stringify(bookmarkColumns))\r\n  }\r\n\r\n  /** 导出书签 */\r\n  const outputBookmark = () => {\r\n    contentToFile('bookmarks.json', JSON.stringify(bookmarkColumns))\r\n  }\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    fetchColumnWithMark<BookmarkColumnData[]>().then((res: any) => {\r\n      const { data } = res.data\r\n      setColumns(data)\r\n      setLoading(false)\r\n\r\n      setEnterLoading(false)\r\n    })\r\n  }, [refreshFlag])\r\n\r\n  const renderBookmarkColumns = () => {\r\n    return bookmarkColumns.map(column => (\r\n      <BookmarkColumn\r\n        key={column._id}\r\n        column={column}\r\n        removeMark={handleRemove}\r\n        showDrawer={handleShowDrawer}\r\n      />\r\n    ))\r\n  }\r\n\r\n  return (\r\n    <BookmarkContainer>\r\n      {isLoading && enterLoading ? (\r\n        <BookmarkSkeleton />\r\n      ) : (\r\n        renderBookmarkColumns()\r\n      )}\r\n\r\n      {/* 底部其他操作 */}\r\n      <div className=\"button-actions\">\r\n        <Button\r\n          className=\"add-bookmark\"\r\n          icon={<EllipsisOutlined />}\r\n          type=\"primary\"\r\n          onClick={() => handleShowDrawer('bookmarkColumn', null)}\r\n        >\r\n          扩展书栏\r\n        </Button>\r\n\r\n        <Button\r\n          className=\"input-bookmark\"\r\n          icon={<DownloadOutlined />}\r\n          onClick={inputBookmark}\r\n        >\r\n          导入书签\r\n        </Button>\r\n\r\n        <Button\r\n          icon={<ExportOutlined />}\r\n          className=\"output-bookmark\"\r\n          type=\"primary\"\r\n          onClick={outputBookmark}\r\n        >\r\n          导出书签\r\n        </Button>\r\n      </div>\r\n\r\n      {/* 公共弹框 */}\r\n      <CommonModal ref={modalRef} />\r\n\r\n      {/* 表单抽屉 */}\r\n      <FormDrawer\r\n        baseTitle={\r\n          drawerActionType.current === 'bookmarkColumn' ? '书栏' : '书签'\r\n        }\r\n        fields={fields}\r\n        ref={drawerRef}\r\n      />\r\n    </BookmarkContainer>\r\n  )\r\n})\r\n\r\n/** 书签骨架 */\r\nconst BookmarkSkeleton: FC = memo(props => {\r\n  /** 渲染占位骨架 */\r\n  function renderSkeleton(row: number, col: number): Array<ReactNode> {\r\n    const inputStyle: CSSProperties = { width: 200, height: 22, marginTop: 10 }\r\n\r\n    const ColElement = (\r\n      <Col {...colProps}>\r\n        <BookmarkCard>\r\n          <Skeleton.Avatar active size={66} />\r\n          <Skeleton.Input style={inputStyle} active />\r\n        </BookmarkCard>\r\n      </Col>\r\n    )\r\n\r\n    const RowElement = (\r\n      <BookmarkColumnWra>\r\n        <div className=\"header\">\r\n          <div className=\"column-info\">\r\n            <Skeleton.Avatar active size={32} />\r\n            &nbsp;&nbsp;\r\n            <Skeleton.Input style={{ width: 200, height: 28 }} active />\r\n          </div>\r\n          <Skeleton.Button active />\r\n        </div>\r\n        <Row gutter={[16, 16]}>{new Array(col).fill(ColElement)}</Row>\r\n      </BookmarkColumnWra>\r\n    )\r\n    return new Array(row).fill(RowElement)\r\n  }\r\n\r\n  return <>{renderSkeleton(2, 8)}</>\r\n})\r\n\r\nexport default BookmarkCollect\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\menu.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\menu.ts",["479"],"import * as AntdIcon from '@ant-design/icons/lib/icons'\r\nimport { createElement, ReactNode } from 'react'\r\nimport { ResponseMenuItemData } from '../views/menu-list'\r\nimport { IAsideMenu } from './../components/container/container-aside'\r\nimport { combineURL } from './tool'\r\n\r\n/** 获取扁平化的菜单 */\r\nexport const getFlattenMenus = (menuData: IAsideMenu[]) => {\r\n  return menuData.reduce<IAsideMenu[]>((result, menu) => {\r\n    result.push(menu)\r\n    if (menu.children) {\r\n      result = result.concat(getFlattenMenus(menu.children))\r\n    }\r\n    return result\r\n  }, [])\r\n}\r\n\r\n/** 将 url 转换为 url数组 (/a/b/c => ['/a', '/b', '/c'])*/\r\nexport const url2paths = (url: string) => {\r\n  /** 根据 / 分割 url(并且去除第一个 / ) ['a', 'b', 'c'] */\r\n  const paths = url.slice(1).split('/')\r\n\r\n  /** 为每一个成员前面添加一个 '/' */\r\n  return paths.map((item, index) => '/' + paths.slice(0, index + 1).join('/'))\r\n}\r\n\r\ntype combineMenuType = (\r\n  menu1: IAsideMenu[],\r\n  menu2: IAsideMenu[],\r\n) => IAsideMenu[]\r\n\r\n/** 合并拼接菜单 */\r\nexport const combineMenu: combineMenuType = (menu1, menu2) => {\r\n  return [/* ...menu1,  */ ...menu2]\r\n}\r\n\r\ntype formatMenuPathType = (\r\n  menus: IAsideMenu[],\r\n  parentPath?: string,\r\n) => IAsideMenu[]\r\n\r\n/** 格式化菜单路径 */\r\nexport const formatMenuPath: formatMenuPathType = (menus, parentPath) => {\r\n  if (parentPath === undefined) {\r\n    parentPath = '/'\r\n  }\r\n  return menus.map(menu => {\r\n    const result = {\r\n      ...menu,\r\n      path: combineURL(parentPath!, menu.path),\r\n    }\r\n    if (menu.children) {\r\n      result.children = formatMenuPath(\r\n        menu.children,\r\n        combineURL(parentPath!, menu.path),\r\n      )\r\n    }\r\n    return result\r\n  })\r\n}\r\n\r\n/** 将菜单数据转换可渲染数据 */\r\nexport function arr2menu(arr: ResponseMenuItemData[]): IAsideMenu[] {\r\n  const asideMenus: IAsideMenu[] = []\r\n\r\n  /** 遍历获取顶级节点 */\r\n  for (let i = 0; i < arr.length; i++) {\r\n    const item = arr[i]\r\n\r\n    /** 有父级 id 代表不是顶级菜单 */\r\n    if (item.parentId) continue\r\n    asideMenus.push(transformMenuItem(item))\r\n    /** 在上面一步，我们拿到了菜单数据，为了减少遍历，我们设置为null */\r\n    arr[i] = null as any\r\n  }\r\n\r\n  /** 转移到上级菜单 top 中 */\r\n  function transferTopMenu(\r\n    menus: Array<ResponseMenuItemData | null>,\r\n    topMenu: IAsideMenu,\r\n  ) {\r\n    /** 递归出口 */\r\n    if (menus.filter(menu => menu !== null).length === 0) return\r\n\r\n    /** 判断菜单的parentId 是否和我们的 topMenu相同，相同的话，将结果 push 到topMenu 的children中 */\r\n    for (let i = 0; i < menus.length; i++) {\r\n      const item = menus[i]\r\n      if (item === null) continue\r\n\r\n      if (item.parentId === topMenu._id!) {\r\n        if (typeof topMenu.children === 'undefined') {\r\n          topMenu.children = []\r\n        }\r\n        const child = transformMenuItem(item)\r\n\r\n        topMenu.children.push(child)\r\n\r\n        menus[i] = null as any\r\n\r\n        transferTopMenu(menus, child)\r\n      }\r\n    }\r\n  }\r\n\r\n  asideMenus.forEach(topMenu => transferTopMenu(arr, topMenu))\r\n\r\n  /** 排序 */\r\n  asideMenus.sort((a, b) => a.index - b.index)\r\n\r\n  return asideMenus\r\n}\r\n\r\n/** 转换为菜单项数据 */\r\nfunction transformMenuItem(item: ResponseMenuItemData): IAsideMenu {\r\n  let { _id, title, path, icon, topIds, auth, index } = item\r\n  const result = {\r\n    _id,\r\n    title,\r\n    path,\r\n    topIds,\r\n    auth,\r\n    index,\r\n    icon,\r\n  } as IAsideMenu\r\n\r\n  // if (icon) {\r\n  //   result.icon = (AntdIcon as any)[icon]\r\n  // }\r\n\r\n  return result\r\n}\r\n\r\n/** 获取删除菜单的菜单集合(自身菜单 + 子类菜单) */\r\nexport function getRemoveMenuIds(menu: IAsideMenu): string[] {\r\n  const { topIds, _id } = menu\r\n  return [_id!, ...topIds!]\r\n}\r\n\r\n/** 获取Antd Icon */\r\nexport function getAntdIcon(icon: any) {\r\n  // return createElement(icon)\r\n  if (icon && icon.render) {\r\n    return icon.render()\r\n  }\r\n  return null\r\n}\r\n\r\n/** 根据图标字符串获取 antdIcon */\r\nexport function getAntdIconByIconStr(icon?: string): null | ReactNode {\r\n  if (typeof icon === 'undefined') return null\r\n\r\n  return getAntdIcon((AntdIcon as any)[icon])\r\n}\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\loading\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\validator.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\code.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\system\\login\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\analyses\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-table-pagination.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\bookmark.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\analyse.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\styles\\global-style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\utils\\file.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-click-outside.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\context.ts",["480"],"import { IAsideMenu } from './container-aside'\r\nimport { IRoute } from './../../routes/types'\r\nimport { IUserInfo } from './../../store/module/user/reducer'\r\nimport { createContext } from 'react'\r\n\r\nexport interface ContainerContextProps {\r\n  /** 用户信息 */\r\n  userInfo: IUserInfo | null\r\n\r\n  /** 退出登录 */\r\n  logout: any\r\n}\r\n\r\nexport const ContainerContext = createContext<ContainerContextProps>(\r\n  {} as ContainerContextProps,\r\n)\r\n\r\nexport interface MenuContextProps {\r\n  /** 菜单列表 */\r\n  menus: IAsideMenu[]\r\n\r\n  /** 设置菜单 */\r\n  setMenus: (newMenus: IAsideMenu[]) => void\r\n}\r\n\r\nexport const MenuContext = createContext<MenuContextProps>(\r\n  {} as MenuContextProps,\r\n)\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\index.tsx",["481","482","483"],"import {\r\n  useMemo,\r\n  useEffect,\r\n  memo,\r\n  FC,\r\n  useState,\r\n  useCallback,\r\n  useRef,\r\n} from 'react'\r\nimport { Row, Col, message } from 'antd'\r\nimport TodoCompleteRate from './todo-rate'\r\nimport TodoDynamic from './todo-dynamic'\r\nimport CommonModal, { ImperativeProps } from '../../components/common-modal'\r\nimport TodoContext, { TodoContextProps } from './context'\r\nimport TodoApp from './todo-app'\r\nimport { TodoDynamicData } from './todo-dynamic'\r\n\r\nimport {\r\n  addTodo,\r\n  removeTodo,\r\n  changeTodo,\r\n  toggleTodo,\r\n  clearCompletedTodo,\r\n  fetchTodos,\r\n  fetchTodoProcess,\r\n  undoTodoDynamic,\r\n  clearAllDynamic,\r\n  fetchTodoDynamic,\r\n  toggleAllTodo,\r\n} from '../../api/todo'\r\n\r\n/** 待办行为 */\r\nexport enum TodoAction {\r\n  /** 新增待办 */\r\n  add = 'add',\r\n\r\n  /** 新增待办 */\r\n  remove = 'remove',\r\n\r\n  /** 修改待办(文案) */\r\n  change = 'change',\r\n\r\n  /** 切换待办完成状态 */\r\n  toggle = 'toggle',\r\n\r\n  /** 切换所有待办完成状态 */\r\n  toggleAll = 'toggleAll',\r\n\r\n  /** 清除完成的待办 */\r\n  clearDone = 'clearDone',\r\n\r\n  /** 撤销 */\r\n  undo = 'undo',\r\n\r\n  /** 获取待办 */\r\n  find = 'find',\r\n}\r\n\r\ntype Key<U> = U extends TodoAction.add\r\n  ? 'add'\r\n  : U extends TodoAction.remove\r\n  ? 'remove'\r\n  : U extends TodoAction.change\r\n  ? 'change'\r\n  : U extends TodoAction.toggle\r\n  ? 'toggle'\r\n  : U extends TodoAction.toggleAll\r\n  ? 'toggleAll'\r\n  : U extends TodoAction.clearDone\r\n  ? 'clearDone'\r\n  : U extends TodoAction.undo\r\n  ? 'undo'\r\n  : 'other'\r\n\r\ntype ActionNoPayload = TodoAction.clearDone | TodoAction.find\r\n\r\ntype ActionWithPayload = Exclude<TodoAction, ActionNoPayload>\r\n\r\nexport type Payload<U> = {\r\n  /** 待办文案 */\r\n  add: string\r\n  /** 删除待办的Id */\r\n  remove: string\r\n  /** { id: 待办Id, text: 修改的文案 } */\r\n  change: { id: string; text: string }\r\n  /** 切换待办的Id */\r\n  toggle: { id: string; completed: boolean }\r\n  /** 切换所有完成状态 */\r\n  toggleAll: boolean\r\n  /** 清除完成的待办 */\r\n  clearDone: any\r\n  /** 撤销 => 待办 Id */\r\n  undo: string\r\n  other: any\r\n}[Key<U>]\r\n\r\n/** 待办操作行为方法 */\r\nexport interface TodoActionFunc {\r\n  /** 没有payload的action */\r\n  <T extends ActionNoPayload>(actionType: ActionNoPayload): void | never\r\n\r\n  /** 没有payload的action */\r\n  <T extends ActionWithPayload>(\r\n    actionType: ActionWithPayload,\r\n    payload: Payload<T>,\r\n  ): void | never\r\n\r\n  /** 用于包含上面所有的类型 */\r\n  <T extends TodoAction>(actionType: TodoAction, payload?: Payload<T>):\r\n    | void\r\n    | never\r\n}\r\n\r\n/** 待办 */\r\nexport type Todo = {\r\n  _id: string\r\n\r\n  /** 待办文案 */\r\n  text: string\r\n\r\n  /** 是否完成 */\r\n  completed: boolean\r\n}\r\n\r\nconst Todos: FC = memo(() => {\r\n  /** 待办列表 */\r\n  const [todoList, setTodoList] = useState<Todo[]>([])\r\n\r\n  /** 待办动态列表 */\r\n  const [todoDynamics, setTodoDynamics] = useState<TodoDynamicData[]>([])\r\n\r\n  /** 待办完成进度 */\r\n  const [todoProcess, setProcess] = useState(0)\r\n\r\n  /** 获取表格数据加载状态 */\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  /** 重新获取数据标识 */\r\n  const [refreshFlag, toggleRefreshFlag] = useState(false)\r\n\r\n  /** 控制模态框 */\r\n  const modalRef = useRef<ImperativeProps>(null)\r\n\r\n  /** 待办行为 */\r\n  const todoAction = useMemo<TodoActionFunc>(() => {\r\n    /** 没有payload的action */\r\n    function handler<T extends ActionNoPayload>(actionType: T): void | never\r\n    /** 没有payload的action */\r\n    function handler<T extends ActionWithPayload>(\r\n      actionType: T,\r\n      payload: Payload<T>,\r\n    ): void | never\r\n    /** 用于包含上面所有的类型 */\r\n    function handler<T extends TodoAction>(\r\n      actionType: T,\r\n      payload?: Payload<T>,\r\n    ): void | never {\r\n      // console.log('actionType', actionType)\r\n      // console.log('payload', payload)\r\n      const promise = new Promise(resolve => {\r\n        switch (actionType) {\r\n          case TodoAction.add:\r\n            resolve(addTodo(payload as Payload<TodoAction.add>))\r\n            break\r\n          case TodoAction.remove:\r\n            resolve(removeTodo(payload as Payload<TodoAction.remove>))\r\n            break\r\n          case TodoAction.change:\r\n            const { id: changeId, text } = payload as Payload<TodoAction.change>\r\n            resolve(changeTodo(changeId, text))\r\n            break\r\n          case TodoAction.toggle:\r\n            const {\r\n              id: toggleId,\r\n              completed,\r\n            } = payload as Payload<TodoAction.toggle>\r\n            resolve(toggleTodo(toggleId, completed))\r\n            break\r\n          case TodoAction.toggleAll:\r\n            resolve(toggleAllTodo(payload as Payload<TodoAction.toggleAll>))\r\n            break\r\n          case TodoAction.clearDone:\r\n            resolve(clearCompletedTodo())\r\n            break\r\n\r\n          case TodoAction.undo:\r\n            resolve(undoTodoDynamic(payload as Payload<TodoAction.undo>))\r\n            break\r\n          default:\r\n            throw new Error('no action type with' + actionType)\r\n        }\r\n      })\r\n\r\n      promise.then(() => {\r\n        toggleRefreshFlag(t => !t)\r\n      })\r\n    }\r\n\r\n    return handler\r\n  }, [])\r\n\r\n  const handleClearAll = useCallback(() => {\r\n    const { openModal, closeModal } = modalRef.current!\r\n\r\n    openModal('是否删除所有的待办动态，删除后之前的无法找回~', () => {\r\n      clearAllDynamic()\r\n        .then(res => {\r\n          const { code, msg } = res.data\r\n          // 删除成功\r\n          if (code === 200) {\r\n            setTodoDynamics([])\r\n            message.success(msg)\r\n          }\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n        .finally(() => closeModal())\r\n    })\r\n  }, [])\r\n\r\n  /** 获取数据 */\r\n  useEffect(() => {\r\n    setLoading(true)\r\n\r\n    Promise.all([\r\n      fetchTodos<Todo[]>(),\r\n      fetchTodoDynamic<TodoDynamicData[]>(),\r\n      fetchTodoProcess<number>(),\r\n    ]).then(([todoRes, dynamicRes, processRes]) => {\r\n      const { data: todoData } = todoRes.data\r\n      const { data: dynamicData } = dynamicRes.data\r\n      const { data: processData } = processRes.data\r\n      setTodoDynamics(dynamicData)\r\n      // console.log(dynamicData)\r\n      setTodoList(todoData)\r\n      setProcess(processData)\r\n      setLoading(false)\r\n    })\r\n\r\n    // fetchTodos<Todo[]>().then(res => {\r\n    //   const { data } = res.data\r\n    //   setLoading(false)\r\n    //   setTodoList(data)\r\n    // })\r\n  }, [refreshFlag])\r\n\r\n  return (\r\n    <TodoContext.Provider value={{ todoAction }}>\r\n      <Row gutter={[16, 24]}>\r\n        <Col xs={24} md={16}>\r\n          <TodoApp todoList={todoList} />\r\n        </Col>\r\n\r\n        <Col xs={24} md={8}>\r\n          <TodoCompleteRate percent={todoProcess} />\r\n          <TodoDynamic dynamics={todoDynamics} clearAll={handleClearAll} />\r\n        </Col>\r\n\r\n        {/* 公共弹框 */}\r\n        <CommonModal ref={modalRef} />\r\n      </Row>\r\n    </TodoContext.Provider>\r\n  )\r\n})\r\n\r\nexport default Todos\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\common-modal\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-footer.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-main.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\index.tsx",["484","485"],"import {\r\n  FC,\r\n  useState,\r\n  memo,\r\n  forwardRef,\r\n  useImperativeHandle,\r\n  ReactNode,\r\n  useRef,\r\n  useMemo,\r\n  RefObject,\r\n  useCallback,\r\n} from 'react'\r\nimport { Button, Drawer, Form, Input, InputNumber } from 'antd'\r\nimport { InputNumberProps } from 'antd/lib/input-number'\r\nimport { DrawerProps } from 'antd/lib/drawer'\r\nimport { Rule, FormInstance } from 'antd/lib/form'\r\nimport SimpleUpload from '../simple-upload'\r\nimport FormSelect, { FormSelectProps } from './form-select'\r\nimport FormSelectIcon, { FormSelectIconProps } from './form-icon'\r\nimport { formDrawerContext, FormDrawerContextProps } from './context'\r\n\r\ntype FormType = 'input' | 'password' | 'upload' | 'icon' | 'number' | 'select'\r\n\r\nexport interface FormDrawerFieldProps {\r\n  /** 表单类型 */\r\n  type: FormType\r\n\r\n  /** 提示语言 */\r\n  label: string\r\n\r\n  /** 表单提交名称 */\r\n  name: string\r\n\r\n  /** 表单值 */\r\n  value: string | undefined\r\n\r\n  /** 如果是 number 之类的 的一些配置 */\r\n  payload?: any\r\n\r\n  rules?: Rule[]\r\n}\r\n\r\n/** 向外抛出的对象 */\r\nexport interface DrawerImperativeProps {\r\n  /** 打开抽屉，向内传送一个完成后的回调 */\r\n  openDrawer: <T>(afterFinishCb: IAfterFinish, editData: null | T) => void\r\n\r\n  /** 关闭抽屉 */\r\n  closeDrawer: () => void\r\n}\r\n\r\ninterface DrawerFormItemProps {\r\n  form: FormInstance\r\n  field: FormDrawerFieldProps\r\n}\r\n\r\nconst DrawerFormItem: FC<DrawerFormItemProps> = memo(props => {\r\n  let {\r\n    field: { label, name, type, value, rules, payload },\r\n    form,\r\n  } = props\r\n\r\n  if (typeof rules === 'undefined') {\r\n    rules = [{ required: true, message: `${label}不能为空!` }]\r\n  }\r\n\r\n  const changeFormValue = useCallback(\r\n    (val: string) => {\r\n      form.setFieldsValue({ [name]: val })\r\n    },\r\n    [form],\r\n  )\r\n\r\n  let content: ReactNode = null\r\n\r\n  switch (type) {\r\n    case 'password':\r\n      break\r\n    case 'upload':\r\n      form.setFieldsValue({ [name]: value })\r\n      content = <SimpleUpload filepath={value} setFilePath={changeFormValue} />\r\n      break\r\n    case 'icon':\r\n      form.setFieldsValue({ [name]: value })\r\n      content = (\r\n        <FormSelectIcon\r\n          {...(payload as FormSelectIconProps)}\r\n          iconPath={value}\r\n          setIconPath={changeFormValue}\r\n        />\r\n      )\r\n      break\r\n    case 'number':\r\n      content = (\r\n        <InputNumber\r\n          onChange={changeFormValue as any}\r\n          {...(payload as InputNumberProps)}\r\n          style={{ width: '100%' }}\r\n        />\r\n      )\r\n      break\r\n    case 'select':\r\n      form.setFieldsValue({ [name]: value })\r\n      content = payload ? (\r\n        <FormSelect\r\n          {...(payload as FormSelectProps)}\r\n          selectedValue={value}\r\n          setSelectedValue={changeFormValue}\r\n        />\r\n      ) : null\r\n      break\r\n    case 'input':\r\n    default:\r\n      content = <Input placeholder={`请输入${label}`} />\r\n  }\r\n\r\n  return (\r\n    <Form.Item label={label} name={name} rules={rules}>\r\n      {content}\r\n    </Form.Item>\r\n  )\r\n})\r\n\r\nexport interface FormDrawerProps extends DrawerProps {\r\n  /** 根据是否有 editData 拼接标题 */\r\n  baseTitle: string\r\n\r\n  ref: RefObject<DrawerImperativeProps>\r\n\r\n  /** 字段集合 */\r\n  fields: FormDrawerFieldProps[]\r\n}\r\n\r\ninterface IAfterFinish {\r\n  (result: any, editData: any): void\r\n}\r\n\r\nconst FormDrawer: FC<FormDrawerProps> = memo(\r\n  forwardRef((props, ref) => {\r\n    const { fields, baseTitle, ...restProps } = props\r\n\r\n    /** 弹框显示状态 */\r\n    const [isShowDrawer, setShowDrawer] = useState(false)\r\n\r\n    /** 编辑数据(如果不为空，代表我们是想左编辑操作) */\r\n    const [editData, setEditData] = useState<any>(null)\r\n\r\n    /** 关闭 */\r\n    const [closeFlag, setCloseFlag] = useState(false)\r\n\r\n    const [form] = Form.useForm()\r\n\r\n    /** 完成之后的回调 */\r\n    const afterFinish = useRef<IAfterFinish | null>(null)\r\n\r\n    /** 表单执行上下文 */\r\n    const context: FormDrawerContextProps = { closeFlag }\r\n\r\n    /** 默认标题 */\r\n    const normalTitle = `${editData ? '编辑' : '添加'}` + baseTitle\r\n\r\n    const defaultDrawerProps: DrawerProps = {\r\n      placement: 'right',\r\n    }\r\n\r\n    const handleFinish = (result: any) => {\r\n      afterFinish.current && afterFinish.current(result, editData)\r\n    }\r\n\r\n    const fieldList = useMemo<FormDrawerFieldProps[]>(() => {\r\n      return fields.map(field => {\r\n        const { name, value } = field\r\n        if (!editData) {\r\n          form.setFieldsValue({ [name]: '' })\r\n          return { ...field, value: '' }\r\n        }\r\n        let editVal = editData[name]\r\n\r\n        form.setFieldsValue({ [name]: editVal || value })\r\n        return { ...field, value: editVal }\r\n      })\r\n    }, [closeFlag, editData, fields, form])\r\n\r\n    const handleClose = () => {\r\n      setShowDrawer(false)\r\n      setCloseFlag(f => !f)\r\n      setEditData(null)\r\n      afterFinish.current = null\r\n    }\r\n\r\n    /** 向外抛出控制抽屉方法 */\r\n    useImperativeHandle<any, DrawerImperativeProps>(ref, () => {\r\n      function openDrawer(afterFinishCb: IAfterFinish, editData: any) {\r\n        /** 将成功后的行为缓存下来 */\r\n        afterFinish.current = afterFinishCb\r\n\r\n        setEditData(editData)\r\n        setShowDrawer(true)\r\n      }\r\n\r\n      return {\r\n        openDrawer,\r\n        closeDrawer: handleClose,\r\n      }\r\n    })\r\n\r\n    return (\r\n      <formDrawerContext.Provider value={context}>\r\n        <Drawer\r\n          title={normalTitle}\r\n          {...Object.assign({}, defaultDrawerProps, restProps)}\r\n          onClose={handleClose}\r\n          visible={isShowDrawer}\r\n          getContainer={false}\r\n        >\r\n          <Form layout=\"vertical\" form={form} onFinish={handleFinish}>\r\n            {fieldList.map(field => (\r\n              <DrawerFormItem form={form} field={field} key={field.name} />\r\n            ))}\r\n\r\n            <Form.Item>\r\n              <Button block htmlType=\"submit\" type=\"primary\">\r\n                提交\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Drawer>\r\n      </formDrawerContext.Provider>\r\n    )\r\n  }),\r\n)\r\n\r\nexport default FormDrawer\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-header.tsx",["486","487"],"import { FC, memo, CSSProperties, useContext, useEffect, useState } from 'react'\r\nimport { Layout, Avatar, Menu, Dropdown, Row, Col } from 'antd'\r\nimport { useHistory } from 'react-router-dom'\r\nimport dayJs from 'dayjs'\r\nimport { ContainerHeaderInner } from './style'\r\nimport ContainerBreadcrumb from './container-breadcrumb'\r\nimport ContainerHistory from './container-history'\r\nimport globalStyle from '../../styles/global-style'\r\nimport {\r\n  AntDesignOutlined,\r\n  UserOutlined,\r\n  SettingOutlined,\r\n  LogoutOutlined,\r\n  MenuFoldOutlined,\r\n} from '@ant-design/icons'\r\n// import QRCode from 'qrcode.react'\r\n\r\nimport defaultAvatar from '../../asserts/images/default.png'\r\nimport { ContainerContext } from './context'\r\nimport useHashChange from '../../hooks/use-hash-change'\r\n\r\ninterface HeaderToggleProps {\r\n  /** 切换展示和隐藏 */\r\n  toggle: any\r\n}\r\n\r\n/** 头部切换侧边栏展示组件 */\r\nconst HeaderToggle: FC<HeaderToggleProps> = memo(props => {\r\n  const { toggle } = props\r\n\r\n  return (\r\n    <div className=\"toggle\" onClick={toggle}>\r\n      <MenuFoldOutlined />\r\n    </div>\r\n  )\r\n})\r\n\r\n/** 网站二维码 */\r\nconst BrowserQrCode: FC = memo(() => {\r\n  return <div>{/* <QRCode value=\"http://blog.smalllb.top/admin\" /> */}</div>\r\n})\r\n\r\n/** 头部控制项组件 */\r\nconst HeaderOptions: FC = memo(() => {\r\n  const { logout, userInfo } = useContext(ContainerContext)\r\n  const history = useHistory()\r\n\r\n  function handleMenuClick(info: any) {\r\n    const { key } = info\r\n\r\n    switch (key) {\r\n      case 'info':\r\n        history.push('/account/center')\r\n        break\r\n      case 'setting':\r\n        history.push('/account/setting')\r\n        break\r\n      case 'logout':\r\n        logout()\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  const menu = (\r\n    <Menu onClick={handleMenuClick}>\r\n      <Menu.Item key=\"info\" icon={<UserOutlined />}>\r\n        个人中心\r\n      </Menu.Item>\r\n      <Menu.Item key=\"setting\" icon={<SettingOutlined />}>\r\n        个人设置\r\n      </Menu.Item>\r\n      <Menu.Divider />\r\n      <Menu.Item key=\"logout\" icon={<LogoutOutlined />}>\r\n        退出登录\r\n      </Menu.Item>\r\n    </Menu>\r\n  )\r\n  return (\r\n    <div className=\"options\">\r\n      {/* <Dropdown overlay={<BrowserQrCode />} placement=\"bottomRight\" arrow>\r\n        <div>\r\n          <UserOutlined /> 分享\r\n        </div>\r\n      </Dropdown> */}\r\n      欢迎，\r\n      <Dropdown overlay={menu} placement=\"bottomCenter\" arrow>\r\n        <div>\r\n          <Avatar\r\n            className=\"avatar\"\r\n            size={30}\r\n            icon={\r\n              false ? (\r\n                <AntDesignOutlined />\r\n              ) : (\r\n                <img src={defaultAvatar} alt=\"默认头像\" />\r\n              )\r\n            }\r\n          />\r\n          <span className=\"nickname\">{userInfo?.nickname}</span>\r\n        </div>\r\n      </Dropdown>\r\n    </div>\r\n  )\r\n})\r\n\r\n/** 头部时间组件 */\r\nconst HeaderDate: FC = memo(() => {\r\n  const [dateStr, setDateStr] = useState<string>(() => {\r\n    return dayJs(Date.now()).format('YYYY年MM月DD日 HH:mm')\r\n  })\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setDateStr(dayJs(Date.now()).format('YYYY年MM月DD日 HH:mm:ss'))\r\n    }, 1000)\r\n\r\n    return () => {\r\n      clearInterval(timer)\r\n    }\r\n  }, [])\r\n\r\n  return <div className=\"date\">{dateStr}</div>\r\n})\r\n\r\ninterface ContainerHeaderProps extends HeaderToggleProps {\r\n  /** 当前是否为移动端(动态设置侧边栏) */\r\n  isMobile: boolean\r\n}\r\n\r\nconst ContainerHeader: FC<ContainerHeaderProps> = memo(props => {\r\n  const { isMobile, toggle } = props\r\n\r\n  const headerStyle: CSSProperties = {\r\n    position: 'relative',\r\n    padding: '5px 30px',\r\n    height: 'auto',\r\n    background: globalStyle['highlight-background-color'],\r\n    boxShadow: ` 0 1px 2px 0 ${globalStyle['theme-color-shadow']}`,\r\n  }\r\n\r\n  return (\r\n    <Layout.Header style={headerStyle}>\r\n      <ContainerHeaderInner>\r\n        <div className=\"top\">\r\n          {/* 移动端 切换展示侧边栏按钮 */}\r\n          {isMobile && <HeaderToggle toggle={toggle} />}\r\n\r\n          {/* 面包屑 */}\r\n          <ContainerBreadcrumb />\r\n\r\n          {/* 头部控制项 */}\r\n          <HeaderOptions />\r\n        </div>\r\n        <div className=\"bottom\">\r\n          <Row align=\"middle\" style={{ height: '100%' }}>\r\n            <Col md={{ span: 16 }} xs={{ span: 24 }}>\r\n              {/* 导航历史 */}\r\n              <ContainerHistory />\r\n            </Col>\r\n            <Col md={{ span: 7, offset: 1 }} xs={{ span: 0 }}>\r\n              <HeaderDate />\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </ContainerHeaderInner>\r\n    </Layout.Header>\r\n  )\r\n})\r\n\r\nexport default ContainerHeader\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-aside.tsx",["488"],"import { FC, memo, ReactNode, useEffect, useState, useContext } from 'react'\r\nimport { Layout, Menu, Skeleton } from 'antd'\r\nimport { useSelector } from 'react-redux'\r\nimport { MenuProps } from 'antd/lib/menu'\r\nimport { SiderProps } from 'antd/lib/layout/Sider'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport logoImg from '../../asserts/images/ContainerAside/banner.png'\r\nimport { ContainerAsideInner } from './style'\r\nimport { fetchAsideMenus } from '../../api/menu'\r\nimport { combineURL } from '../../utils/tool'\r\nimport {\r\n  arr2menu,\r\n  formatMenuPath,\r\n  getAntdIconByIconStr,\r\n} from '../../utils/menu'\r\nimport config from '../../config'\r\nimport useMenuSelectedKeys from '../../hooks/use-menu-selectd-keys'\r\nimport { MenuContext } from './context'\r\nimport { IUserType } from '../../store/module/user/reducer'\r\nimport { IStoreState } from '../../store/types'\r\nimport { ResponseMenuItemData } from '../../views/menu-list'\r\n\r\nconst { SubMenu } = Menu\r\n\r\n/** 侧边栏菜单接口 */\r\nexport interface IAsideMenu {\r\n  /** 菜单id */\r\n  _id?: string\r\n\r\n  /** 菜单标题 */\r\n  title: string\r\n\r\n  /** 菜单路径 */\r\n  path: string\r\n\r\n  /** 菜单图标 */\r\n  icon?: any\r\n\r\n  /** 菜单位置 */\r\n  index: number\r\n\r\n  /** 上级菜单 id(为一个数组)*/\r\n  topIds?: string[]\r\n\r\n  /** 侧边栏权限 */\r\n  auth?: IUserType[]\r\n\r\n  /** 子菜单 */\r\n  children?: IAsideMenu[]\r\n}\r\n\r\n/** 菜单骨架屏 */\r\nconst MenuSkeleton: FC = memo(() => {\r\n  return (\r\n    <div>\r\n      {new Array(5).fill(null).map((v, i) => {\r\n        return (\r\n          <div className=\"menu-placeholder\" key={i}>\r\n            <Skeleton.Avatar className=\"icon\" active size={16} />\r\n            <Skeleton.Input className=\"text\" active />\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n})\r\n\r\n/** 侧边栏按钮 */\r\nconst AsideMenu: FC = memo(() => {\r\n  /** 获取菜单项状态 */\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  /** 注意：这里拿不到实时的 location */\r\n  const history = useHistory()\r\n\r\n  const location = useLocation()\r\n\r\n  const { menus, setMenus } = useContext(MenuContext)\r\n\r\n  const menuSelectedKeys = useMenuSelectedKeys(location.pathname, menus)\r\n\r\n  const userType = useSelector<IStoreState, IUserType>(\r\n    state => state.user.userInfo!.type,\r\n  )\r\n\r\n  // const [openKeys, setOpenKes] = useState<string[]>(() => menuSelectedKeys)\r\n\r\n  const menuProps: MenuProps = {\r\n    theme: 'dark',\r\n    mode: 'inline',\r\n    selectedKeys: menuSelectedKeys,\r\n    defaultOpenKeys: menuSelectedKeys,\r\n    // openKeys: openKeys,\r\n    onClick(info) {\r\n      const { key } = info\r\n      const pathname = combineURL(config.BASENAME, key as string)\r\n\r\n      history.push(pathname)\r\n    },\r\n    // onOpenChange(changedOpenKey) {\r\n    //   setOpenKes(changedOpenKey as string[])\r\n    // },\r\n  }\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n\r\n    fetchAsideMenus<ResponseMenuItemData[]>(userType).then(res => {\r\n      const { data } = res.data\r\n      const menus = arr2menu(data)\r\n      /** 将结果格式化路径 */\r\n      const formatResMenus = formatMenuPath(menus)\r\n\r\n      /** 将最新的 menus 同步到 context 中 */\r\n      setMenus(formatResMenus)\r\n\r\n      setLoading(false)\r\n    })\r\n  }, [userType])\r\n\r\n  function renderChildrenMenu(navList: IAsideMenu[]): ReactNode {\r\n    /** 转换为 Menu */\r\n    return navList.map(nav => {\r\n      const { title, path, icon, children } = nav\r\n\r\n      /** 如果有多级路由 */\r\n      if (children?.length) {\r\n        return (\r\n          <SubMenu title={title} icon={getAntdIconByIconStr(icon)} key={path}>\r\n            {renderChildrenMenu(children)}\r\n          </SubMenu>\r\n        )\r\n      }\r\n\r\n      /** 单层路由 */\r\n      return (\r\n        <Menu.Item key={path} icon={getAntdIconByIconStr(icon)}>\r\n          {title}\r\n        </Menu.Item>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Menu {...menuProps}>\r\n      {isLoading ? <MenuSkeleton /> : renderChildrenMenu(menus)}\r\n    </Menu>\r\n  )\r\n})\r\n\r\ninterface ContainerAsideProps {\r\n  /** 当前是否为移动端(动态设置侧边栏) */\r\n  isMobile: boolean\r\n}\r\n\r\nconst ContainerAside: FC<ContainerAsideProps> = memo(props => {\r\n  const [collapsed, setCollapsed] = useState(false)\r\n  const { isMobile } = props\r\n\r\n  /** 切换关闭与展开回调 */\r\n  const handleCollapse = () => {\r\n    setCollapsed(collapsed => !collapsed)\r\n  }\r\n\r\n  /** 根据是否移动端 动态返回 Sider 属性 */\r\n  const getSliderProps: () => SiderProps = () => {\r\n    const sliderProps: SiderProps = {}\r\n\r\n    /** 获取收缩效果，如果是移动端 收缩效果由父组件控制，反之由 内部属性控制 */\r\n    if (isMobile) {\r\n      sliderProps.collapsed = false\r\n      sliderProps.style = { height: '100%' }\r\n    } else {\r\n      sliderProps.collapsible = true\r\n      sliderProps.collapsed = collapsed\r\n      sliderProps.onCollapse = handleCollapse\r\n      sliderProps.breakpoint = 'lg'\r\n    }\r\n\r\n    return sliderProps\r\n  }\r\n\r\n  return (\r\n    <Layout.Sider {...getSliderProps()}>\r\n      <ContainerAsideInner>\r\n        <div className=\"info\">\r\n          <img className=\"info__logo\" src={logoImg} alt=\"Banner\" />\r\n          <h3 className=\"info__title\">个人博客</h3>\r\n        </div>\r\n\r\n        <AsideMenu />\r\n      </ContainerAsideInner>\r\n    </Layout.Sider>\r\n  )\r\n})\r\n\r\nexport default ContainerAside\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\context.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\todo.ts",["489"],"import { Url } from 'url'\r\nimport request from '../utils/request'\r\n\r\n/** 待办模块请求Url集合 */\r\nexport enum TodoUrls {\r\n  addTodo = '/todos/add',\r\n  removeTodo = '/todos',\r\n  changeTodo = '/todos/change',\r\n  toggleTodo = '/todos/toggle',\r\n  toggleAllTodo = '/todos/toggleAll',\r\n  clearCompletedTodo = '/todos/clearCompletedTodo',\r\n  fetchTodos = '/todos/find',\r\n  fetchTodoProcess = '/todos/process',\r\n  clearAllDynamic = '/todos/clearAllDynamic',\r\n  undoTodoDynamic = '/todos/undo',\r\n  fetchTodoDynamic = '/todos/dynamic',\r\n}\r\n\r\n/** 待办相关接口 */\r\n\r\n/** 增加待办 */\r\nexport function addTodo<T = any>(text: string) {\r\n  return request<T>({\r\n    url: TodoUrls.addTodo,\r\n    method: 'POST',\r\n    data: { text },\r\n  })\r\n}\r\n\r\n/** 删除待办 */\r\nexport function removeTodo<T = any>(todoId: string) {\r\n  return request<T>({\r\n    url: `${TodoUrls.removeTodo}/${todoId}`,\r\n    method: 'DELETE',\r\n  })\r\n}\r\n\r\n/** 改变待办文案 */\r\nexport function changeTodo<T = any>(todoId: string, newText: string) {\r\n  return request<T>({\r\n    url: TodoUrls.changeTodo,\r\n    method: 'PATCH',\r\n    data: { id: todoId, newText },\r\n  })\r\n}\r\n\r\n/** 切换待办完成状态 */\r\nexport function toggleTodo<T = any>(todoId: string, completed: boolean) {\r\n  return request<T>({\r\n    url: TodoUrls.toggleTodo,\r\n    method: 'PATCH',\r\n    data: { id: todoId, completed },\r\n  })\r\n}\r\n\r\n/** 切换所有待办完成状态 */\r\nexport function toggleAllTodo<T = any>(completed: boolean) {\r\n  return request<T>({\r\n    url: TodoUrls.toggleAllTodo,\r\n    method: 'PATCH',\r\n    data: { completed },\r\n  })\r\n}\r\n\r\n/** 删除已经完成的待办 TODO */\r\nexport function clearCompletedTodo<T = any>() {\r\n  return request<T>({\r\n    url: TodoUrls.clearCompletedTodo,\r\n    method: 'POST',\r\n  })\r\n}\r\n\r\n/** 获取待办列表  */\r\nexport function fetchTodos<T = any>() {\r\n  return request<T>({\r\n    url: TodoUrls.fetchTodos,\r\n    method: 'GET',\r\n  })\r\n}\r\n\r\n/** 获取当前待办完成进度 */\r\nexport function fetchTodoProcess<T = any>() {\r\n  return request<T>({\r\n    url: TodoUrls.fetchTodoProcess,\r\n    method: 'GET',\r\n  })\r\n}\r\n\r\n/** 待办动态相关接口 */\r\n\r\n/** 清除用户待办动态 */\r\nexport function clearAllDynamic<T = any>() {\r\n  return request<T>({\r\n    url: TodoUrls.clearAllDynamic,\r\n    method: 'POST', // TODO DELETE 怎么不行\r\n  })\r\n}\r\n\r\n/** 待办记录撤销 */\r\nexport function undoTodoDynamic<T = any>(dynamicId: string) {\r\n  return request<T>({\r\n    url: `${TodoUrls.undoTodoDynamic}/${dynamicId}`,\r\n    method: 'DELETE',\r\n  })\r\n}\r\n\r\n/** 获取待办动态列表 */\r\nexport function fetchTodoDynamic<T = any>() {\r\n  return request<T>({\r\n    url: TodoUrls.fetchTodoDynamic,\r\n    method: 'GET',\r\n  })\r\n}\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\context.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-menu-selectd-keys.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-app.tsx",["490","491","492","493","494"],"import { useMemo, useEffect, memo, FC, useState, useCallback } from 'react'\r\nimport { Card, Divider } from 'antd'\r\nimport { TodoWrapper } from './style'\r\nimport useHashChange from '../../hooks/use-hash-change'\r\nimport TodoControl from './todo-control'\r\nimport TodoList from './todo-list'\r\nimport TodoFooter from './todo-footer'\r\nimport { Todo } from './index'\r\n\r\ninterface TodoAppProps {\r\n  /** 待办列表 */\r\n  todoList: Todo[]\r\n}\r\n\r\n/** 待办应用 */\r\nconst TodoApp: FC<TodoAppProps> = memo(props => {\r\n  const { todoList } = props\r\n  const hash = useHashChange()\r\n\r\n  const currentActive: 'all' | 'completed' | 'active' = useMemo(() => {\r\n    const currentHash = hash.replace('dashboard/workplace', '')\r\n    if (currentHash === '#active') {\r\n      return 'active'\r\n    } else if (currentHash === '#completed') {\r\n      return 'completed'\r\n    } else {\r\n      return 'all'\r\n    }\r\n  }, [hash])\r\n\r\n  const isCompletedAll = useMemo(() => {\r\n    // 查看是否为全部完成\r\n    return todoList.every(todo => todo.completed)\r\n  }, [todoList])\r\n\r\n  const filterTodos = useMemo(() => {\r\n    // 查看是否为全部完成\r\n    return todoList.filter(todo => {\r\n      if (currentActive === 'all') {\r\n        return true\r\n      } else if (currentActive === 'active') {\r\n        return todo.completed === false\r\n      } else {\r\n        return todo.completed === true\r\n      }\r\n    })\r\n  }, [todoList, currentActive])\r\n\r\n  return (\r\n    <TodoWrapper>\r\n      <section className=\"todoapp\">\r\n        {/* 添加待办控制组件 */}\r\n        <TodoControl\r\n          todoLen={todoList.length}\r\n          isCompletedAll={isCompletedAll}\r\n        />\r\n        {/* 待办列表展示组件 */}\r\n        <TodoList todoList={filterTodos} />\r\n        {/* 待办底部过滤组件 */}\r\n        <TodoFooter currentActive={currentActive} />\r\n      </section>\r\n    </TodoWrapper>\r\n  )\r\n})\r\n\r\nexport default TodoApp\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-rate.tsx",["495"],"import { memo, FC } from 'react'\r\nimport { Card } from 'antd'\r\nimport { Liquid } from '@ant-design/charts'\r\nimport { LiquidConfig } from '@ant-design/charts/lib/liquid'\r\nimport globalStyle from '../../styles/global-style'\r\n\r\ninterface CompleteRateProps {\r\n  /** 当前进度 */\r\n  percent: number\r\n}\r\n\r\n/** 待办完成率 */\r\nconst CompleteRate: FC<CompleteRateProps> = memo(props => {\r\n  const { percent } = props\r\n  const config: LiquidConfig = {\r\n    percent: percent,\r\n    height: 200,\r\n    statistic: {\r\n      title: {\r\n        formatter: () => '完成度',\r\n        style(_ref) {\r\n          var percent = _ref.percent\r\n          return { fill: percent > 0.65 ? 'white' : globalStyle['theme-color'] }\r\n        },\r\n      },\r\n\r\n      content: {\r\n        style(_ref) {\r\n          const percent = _ref.percent\r\n          return {\r\n            // fontSize: '30px',\r\n            lineHeight: 1,\r\n            fill: percent > 0.65 ? 'white' : globalStyle['theme-color'],\r\n          }\r\n        },\r\n      },\r\n    },\r\n    liquidStyle(_ref) {\r\n      var percent = _ref.percent\r\n      return {\r\n        fill: globalStyle['theme-color'],\r\n        stroke: globalStyle['theme-color'],\r\n      }\r\n    },\r\n  }\r\n\r\n  return (\r\n    <Card style={{ height: 240 }}>\r\n      <div style={{ padding: '0 20%' }}>\r\n        <Liquid {...config} />\r\n      </div>\r\n    </Card>\r\n  )\r\n})\r\n\r\nexport default CompleteRate\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-dynamic.tsx",["496"],"import { FC, memo, useContext } from 'react'\r\nimport { List, Avatar } from 'antd'\r\nimport { DeleteOutlined } from '@ant-design/icons'\r\nimport { useSelector } from 'react-redux'\r\nimport { IStoreState } from '../../store/types'\r\nimport { DynamicWrapper } from './style'\r\nimport defaultAvatar from '../../asserts/images/default.png'\r\nimport { TodoAction } from './index'\r\nimport TodoContext from './context'\r\n// import QueueAnim from 'rc-queue-anim'\r\n// import { List as VList, AutoSizer } from 'react-virtualized'\r\n\r\n/** 待办动态存储数据中的操作类型 */\r\ntype DynamicActionType =\r\n  | 'add'\r\n  | 'remove'\r\n  | 'removeAll'\r\n  | 'change'\r\n  | 'toggle'\r\n  | 'toggleAll'\r\n  | 'other'\r\n\r\n/** 待办动态存储数据中的荷载 */\r\ntype DynamicActionPayload = {\r\n  /** 添加待办 => 待办名称 */\r\n  add: string\r\n\r\n  /** 删除待办 => 待办名称 */\r\n  remove: string\r\n\r\n  /** 删除所有完成的待办 => 修改待办的Ids */\r\n  removeAll: string[]\r\n\r\n  /** 修改待办内容 => { old: 旧的待办; now: 新的待办  } */\r\n  change: { old: string; now: string }\r\n\r\n  /** 切换待办完成状态 => { name: 待办名称; completed: 当前待办完成状态  } */\r\n  toggle: { name: string; completed: boolean }\r\n\r\n  /** 切换所有待办完成状态 => { ids: 修改待办的Ids; completed: 当前待办完成状态  } */\r\n  toggleAll: { ids: string[]; completed: boolean }\r\n\r\n  other: any\r\n}\r\n\r\n/** 待办动态 */\r\nexport interface TodoDynamicData {\r\n  _id: string\r\n\r\n  /** 待办 Id */\r\n  todoId: any\r\n\r\n  /** 存储参数 */\r\n  payload: DynamicActionPayload['other']\r\n\r\n  /** 待办操作类型 */\r\n  type: DynamicActionType\r\n\r\n  /** 创建时间 */\r\n  createdAt: any\r\n}\r\n\r\ninterface DynamicInfo {\r\n  title: string\r\n  description: string\r\n}\r\n\r\ninterface DynamicItemProps {\r\n  item: TodoDynamicData\r\n\r\n  avatar: string\r\n}\r\n\r\nconst DynamicItem: FC<DynamicItemProps> = memo(props => {\r\n  const {\r\n    item: { type, payload, createdAt, _id },\r\n    avatar,\r\n  } = props\r\n\r\n  const { todoAction } = useContext(TodoContext)\r\n\r\n  const info: DynamicInfo = {\r\n    title: 'xxxxxx',\r\n    description:\r\n      'Ant Design, a design language for background applications, is refined by Ant UED Team',\r\n  }\r\n\r\n  switch (type) {\r\n    case 'add':\r\n      info.title = '添加待办'\r\n      info.description = `您新增一个待办名称为: ${payload}`\r\n      break\r\n    case 'remove':\r\n      info.title = '移除待办'\r\n      info.description = `您移除一个名称为${payload}的待办`\r\n      break\r\n    case 'removeAll':\r\n      info.title = '移除已完成待办'\r\n      info.description = `您移除${\r\n        (payload as DynamicActionPayload['removeAll']).length\r\n      }个已经完成的待办项`\r\n      break\r\n    case 'change':\r\n      const { old, now } = payload as DynamicActionPayload['change']\r\n      info.title = '修改待办文案'\r\n      info.description = `您将待办名称为${old}修改文案为${now}`\r\n      break\r\n    case 'toggle':\r\n      const { name, completed } = payload as DynamicActionPayload['toggle']\r\n      info.title = '切换待办完成状态'\r\n      info.description = `您将待办名称为${name}切换为 ${\r\n        completed ? '完成' : '待办'\r\n      }状态`\r\n      break\r\n    case 'toggleAll':\r\n      const {\r\n        ids,\r\n        completed: toggleAllCompleted,\r\n      } = payload as DynamicActionPayload['toggleAll']\r\n      info.title = '切换所有待办完成状态'\r\n      info.description = `您将${ids.length}个待办项切换成${\r\n        toggleAllCompleted ? '完成' : '待办'\r\n      }状态`\r\n      break\r\n    default:\r\n      info.title = '其他待办操作'\r\n      info.description = payload\r\n  }\r\n\r\n  // const timeNode = useMemo(() => {\r\n  //   const now = Date.now()\r\n\r\n  //   return (\r\n  //     <Tooltip title={dayJs(createdAt).format('YYYY-MM-DD HH:mm:ss')}>\r\n  //       <span>({dayJs(createdAt).format('YY/MM/DD')})</span>\r\n  //     </Tooltip>\r\n  //   )\r\n  // }, [createdAt])\r\n\r\n  const titleNode = (\r\n    <div className=\"dynamic-item-title\">\r\n      <div>\r\n        {info.title}\r\n        {/* {timeNode} */}\r\n      </div>\r\n\r\n      <span\r\n        className=\"undo\"\r\n        onClick={() => todoAction<TodoAction.undo>(TodoAction.undo, _id)}\r\n      >\r\n        {/* UNDO */}撤销\r\n      </span>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <List.Item>\r\n      <List.Item.Meta\r\n        avatar={<Avatar src={avatar} />}\r\n        title={titleNode}\r\n        description={info.description}\r\n      />\r\n    </List.Item>\r\n  )\r\n})\r\n\r\ninterface TodoAppProps {\r\n  /** 待办动态列表 */\r\n  dynamics: TodoDynamicData[]\r\n\r\n  /** 清除所有待办动态 */\r\n  clearAll: Function\r\n}\r\n\r\n/** 待办动态 */\r\nconst Dynamic: FC<TodoAppProps> = memo(props => {\r\n  const { dynamics, clearAll } = props\r\n  /** 用户头像 */\r\n  const userAvatar = useSelector<IStoreState, string>(\r\n    state => state.user.userInfo?.avatar ?? defaultAvatar,\r\n  )\r\n\r\n  const header = (\r\n    <div className=\"dynamic-header\">\r\n      待办动态\r\n      {dynamics.length !== 0 && (\r\n        <span className=\"clear-all\" onClick={clearAll as any}>\r\n          <DeleteOutlined /> 清除所有\r\n        </span>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <DynamicWrapper>\r\n      <List itemLayout=\"horizontal\" size=\"small\" header={header}>\r\n        {dynamics.map(item => (\r\n          <DynamicItem item={item} key={item._id} avatar={userAvatar} />\r\n        ))}\r\n        {/* <QueueAnim delay={300}>\r\n         \r\n        </QueueAnim> */}\r\n      </List>\r\n    </DynamicWrapper>\r\n  )\r\n})\r\n\r\nexport default Dynamic\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\form-select.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-history.tsx",["497"],"import {\r\n  FC,\r\n  memo,\r\n  useContext,\r\n  useReducer,\r\n  useMemo,\r\n  useEffect,\r\n  useLayoutEffect,\r\n  useRef,\r\n} from 'react'\r\nimport { Scroll } from 'ease-develop'\r\nimport { Tag } from 'antd'\r\nimport { MenuContext } from './context'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { getFlattenMenus } from '../../utils/menu'\r\nimport globalStyle from '../../styles/global-style'\r\n\r\ninterface IHistoryState {\r\n  title: string\r\n  path: string\r\n  active: boolean\r\n}\r\n\r\ntype IHistoryActionTypes = 'add' | 'remove' | 'toggle' | 'other'\r\n\r\n/** 参数荷载 */\r\ntype Payload = {\r\n  /** 添加——对象数据类型 */\r\n  add: IHistoryState\r\n\r\n  /** 根据标题去切换 */\r\n  toggle: string\r\n\r\n  /** 根据标题去删除 */\r\n  remove: string\r\n\r\n  /** 其他 */\r\n  other: any\r\n}\r\n\r\ninterface IHistoryAction {\r\n  type: IHistoryActionTypes\r\n  payload: any\r\n}\r\n\r\nconst defaultHistoryState: IHistoryState[] = [] /* new Array(30).fill({\r\n  title: 'xxxx',\r\n  path: '/',\r\n  active: true,\r\n}) */\r\n\r\ntype historyReducerType = (\r\n  state: IHistoryState[],\r\n  action: IHistoryAction,\r\n) => IHistoryState[]\r\n\r\nconst historyReducer: historyReducerType = (state, action) => {\r\n  let { payload, type } = action\r\n\r\n  switch (type) {\r\n    /** 通过传标题，删除成员 */\r\n    case 'remove':\r\n      return state.filter(item => item.title !== payload)\r\n\r\n    /** 添加成员，检查是否能找到标题 */\r\n    case 'add':\r\n      if (state.find(item => item.title === payload.title)) {\r\n        return state\r\n      }\r\n\r\n      /** 取消所有高亮 */\r\n      return [\r\n        ...state.map(item => {\r\n          item.active = false\r\n          return item\r\n        }),\r\n        payload,\r\n      ]\r\n\r\n    /** 切换高亮 */\r\n    case 'toggle':\r\n      return state.map(item => {\r\n        if (item.title === payload) {\r\n          item.active = true\r\n        } else {\r\n          item.active = false\r\n        }\r\n        return item\r\n      })\r\n\r\n    /** Test */\r\n    case 'other':\r\n      console.log(action)\r\n      return state\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst ContainerHistory: FC = memo(props => {\r\n  const { menus } = useContext(MenuContext)\r\n\r\n  const innerDOM = useRef<HTMLDivElement>(null)\r\n  const innerWidth = useRef<number>(1200)\r\n\r\n  const [historyState, historyDispatch] = useReducer(\r\n    historyReducer,\r\n    defaultHistoryState,\r\n  )\r\n\r\n  function transformDispatch<T extends IHistoryActionTypes>(\r\n    type: T,\r\n    payload: Payload[T],\r\n  ) {\r\n    historyDispatch({ type, payload })\r\n  }\r\n\r\n  const location = useLocation()\r\n\r\n  const history = useHistory()\r\n\r\n  /** 扁平化的菜单数据 */\r\n  const flattenMenus = useMemo(() => getFlattenMenus(menus), [menus])\r\n\r\n  useEffect(() => {\r\n    const { pathname } = location\r\n    /** 判断是否编辑文章 */\r\n    if (/^(\\/article\\/add\\/)\\w+/.test(pathname)) {\r\n      return transformDispatch('add', {\r\n        title: '编辑文章-' + pathname.slice(-2),\r\n        path: pathname,\r\n        active: true,\r\n      })\r\n    }\r\n    const currentMenu = flattenMenus.find(menu => menu.path === pathname)\r\n\r\n    if (!currentMenu) return\r\n\r\n    transformDispatch('add', {\r\n      title: currentMenu.title,\r\n      path: currentMenu.path,\r\n      active: true,\r\n    })\r\n\r\n    // historyDispatch({\r\n    //   type: 'add',\r\n    //   payload: {\r\n    //     title: currentMenu.title,\r\n    //     path: currentMenu.path,\r\n    //     active: true,\r\n    //   },\r\n    // })\r\n  }, [location.pathname, flattenMenus])\r\n\r\n  const handleClose = (item: IHistoryState) => {\r\n    const { active, title } = item\r\n\r\n    // historyDispatch({ type: 'remove', payload: title })\r\n    transformDispatch('remove', title)\r\n\r\n    /** 如果删除是激活状态，切换高亮删除后的最后一个成员(注意这里的 historyState 还是以前的数据) */\r\n    if (active) {\r\n      const len = historyState.length\r\n\r\n      let lastItem = historyState[len - 1]\r\n\r\n      if (lastItem.title === title) {\r\n        lastItem = historyState[len - 2]\r\n      }\r\n\r\n      handleToggle(lastItem)\r\n    }\r\n  }\r\n\r\n  const handleToggle = (item: IHistoryState) => {\r\n    const { active, title, path } = item\r\n\r\n    if (active) return\r\n\r\n    // historyDispatch({ type: 'toggle', payload: title })\r\n    transformDispatch('toggle', title)\r\n\r\n    history.replace(path)\r\n  }\r\n\r\n  useLayoutEffect(() => {\r\n    const dom = innerDOM.current\r\n\r\n    if (historyState.length === 0 || !dom) return\r\n\r\n    const tag = dom.firstElementChild as HTMLElement\r\n\r\n    /** tag 自身宽度 + margin */\r\n    const newWidth = historyState.length * (tag!.offsetWidth + 8)\r\n    // console.log(newWidth)\r\n    // TODO 如何设置 dom 宽度\r\n    // dom.offsetWidth = '100'\r\n    // console.dir(dom)\r\n    innerWidth.current = newWidth\r\n  })\r\n\r\n  return (\r\n    <div className=\"routerHistory\">\r\n      <Scroll direction=\"horizontal\">\r\n        <div\r\n          className=\"routerHistory__inner\"\r\n          ref={innerDOM}\r\n          style={{ width: innerWidth.current }}\r\n        >\r\n          {historyState.map(item => (\r\n            <Tag\r\n              color={item.active ? globalStyle['theme-color'] : ''}\r\n              key={item.title}\r\n              closable={historyState.length !== 1}\r\n              visible\r\n              onClose={() => handleClose(item)}\r\n              onClick={() => handleToggle(item)}\r\n            >\r\n              {item.title}\r\n            </Tag>\r\n          ))}\r\n        </div>\r\n      </Scroll>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default ContainerHistory\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\form-icon.tsx",["498","499","500"],"import {\r\n  FC,\r\n  useState,\r\n  useEffect,\r\n  memo,\r\n  useMemo,\r\n  useCallback,\r\n  useContext,\r\n  useRef,\r\n} from 'react'\r\nimport { Modal } from 'antd'\r\nimport { SmileTwoTone } from '@ant-design/icons'\r\nimport { Button } from 'antd'\r\nimport { IconListWra, IconItemWra } from './style'\r\nimport { getAntdIconByIconStr } from '../../utils/menu'\r\nimport { formDrawerContext } from './context'\r\n\r\n/** 网站 icon */\r\nconst browserIcons = [\r\n  'AccountBookOutlined',\r\n  'AimOutlined',\r\n  'AlertOutlined',\r\n  'ApartmentOutlined',\r\n  'ApiOutlined',\r\n  'AppstoreAddOutlined',\r\n  'AppstoreOutlined',\r\n  'AudioOutlined',\r\n  'AudioMutedOutlined',\r\n  'AuditOutlined',\r\n  'BankOutlined',\r\n  'BarcodeOutlined',\r\n  'BarsOutlined',\r\n  'BellOutlined',\r\n  'BlockOutlined',\r\n  'BookOutlined',\r\n  'BorderOutlined',\r\n  'BorderlessTableOutlined',\r\n  'BranchesOutlined',\r\n  'BugOutlined',\r\n  'BuildOutlined',\r\n  'BulbOutlined',\r\n  'CalculatorOutlined',\r\n  'CalendarOutlined',\r\n  'CameraOutlined',\r\n  'CarOutlined',\r\n  'CarryOutOutlined',\r\n  'CiCircleOutlined',\r\n  'CiOutlined',\r\n  'ClearOutlined',\r\n  'CloudDownloadOutlined',\r\n  'CloudOutlined',\r\n  'CloudServerOutlined',\r\n  'CloudSyncOutlined',\r\n  'CloudUploadOutlined',\r\n  'ClusterOutlined',\r\n  'CodeOutlined',\r\n  'CoffeeOutlined',\r\n  'CommentOutlined',\r\n  'CompassOutlined',\r\n  'CompressOutlined',\r\n  'ConsoleSqlOutlined',\r\n  'ContactsOutlined',\r\n  'ContainerOutlined',\r\n  'ControlOutlined',\r\n  'CopyrightOutlined',\r\n  'CreditCardOutlined',\r\n  'CrownOutlined',\r\n  'CustomerServiceOutlined',\r\n  'DashboardOutlined',\r\n  'DatabaseOutlined',\r\n  'DeleteColumnOutlined',\r\n  'DeleteRowOutlined',\r\n  'DeliveredProcedureOutlined',\r\n  'DeploymentUnitOutlined',\r\n  'DesktopOutlined',\r\n  'DingtalkOutlined',\r\n  'DisconnectOutlined',\r\n  'DislikeOutlined',\r\n  'DollarCircleOutlined',\r\n  'DollarOutlined',\r\n  'DownloadOutlined',\r\n  'EllipsisOutlined',\r\n  'EnvironmentOutlined',\r\n  'EuroCircleOutlined',\r\n  'EuroOutlined',\r\n  'ExceptionOutlined',\r\n  'ExpandAltOutlined',\r\n  'ExpandOutlined',\r\n  'ExperimentOutlined',\r\n  'ExportOutlined',\r\n  'EyeOutlined',\r\n  'EyeInvisibleOutlined',\r\n  'FieldBinaryOutlined',\r\n  'FieldNumberOutlined',\r\n  'FieldStringOutlined',\r\n  'FieldTimeOutlined',\r\n  'FileAddOutlined',\r\n  'FileDoneOutlined',\r\n  'FileExcelOutlined',\r\n  'FileExclamationOutlined',\r\n  'FileOutlined',\r\n  'FileGifOutlined',\r\n  'FileImageOutlined',\r\n  'FileJpgOutlined',\r\n  'FileMarkdownOutlined',\r\n  'FilePdfOutlined',\r\n  'FilePptOutlined',\r\n  'FileProtectOutlined',\r\n  'FileSearchOutlined',\r\n  'FileSyncOutlined',\r\n  'FileTextOutlined',\r\n  'FileUnknownOutlined',\r\n  'FileWordOutlined',\r\n  'FileZipOutlined',\r\n  'FilterOutlined',\r\n  'FireOutlined',\r\n  'FlagOutlined',\r\n  'FolderAddOutlined',\r\n  'FolderOutlined',\r\n  'FolderOpenOutlined',\r\n  'FolderViewOutlined',\r\n  'ForkOutlined',\r\n  'FormatPainterOutlined',\r\n  'FrownOutlined',\r\n  'FunctionOutlined',\r\n  'FundProjectionScreenOutlined',\r\n  'FundViewOutlined',\r\n  'FunnelPlotOutlined',\r\n  'GatewayOutlined',\r\n  'GifOutlined',\r\n  'GiftOutlined',\r\n  'GlobalOutlined',\r\n  'GoldOutlined',\r\n  'GroupOutlined',\r\n  'HddOutlined',\r\n  'HeartOutlined',\r\n  'HistoryOutlined',\r\n  'HomeOutlined',\r\n  'HourglassOutlined',\r\n  'IdcardOutlined',\r\n  'ImportOutlined',\r\n  'InboxOutlined',\r\n  'InsertRowAboveOutlined',\r\n  'InsertRowBelowOutlined',\r\n  'InsertRowLeftOutlined',\r\n  'InsertRowRightOutlined',\r\n  'InsuranceOutlined',\r\n  'InteractionOutlined',\r\n  'KeyOutlined',\r\n  'LaptopOutlined',\r\n  'LayoutOutlined',\r\n  'LikeOutlined',\r\n  'LineOutlined',\r\n  'LinkOutlined',\r\n  'Loading3QuartersOutlined',\r\n  'LoadingOutlined',\r\n  'LockOutlined',\r\n  'MacCommandOutlined',\r\n  'MailOutlined',\r\n  'ManOutlined',\r\n  'MedicineBoxOutlined',\r\n  'MehOutlined',\r\n  'MenuOutlined',\r\n  'MergeCellsOutlined',\r\n  'MessageOutlined',\r\n  'MobileOutlined',\r\n  'MoneyCollectOutlined',\r\n  'MonitorOutlined',\r\n  'MoreOutlined',\r\n  'NodeCollapseOutlined',\r\n  'NodeExpandOutlined',\r\n  'NodeIndexOutlined',\r\n  'NotificationOutlined',\r\n  'NumberOutlined',\r\n  'OneToOneOutlined',\r\n  'PaperClipOutlined',\r\n  'PartitionOutlined',\r\n  'PayCircleOutlined',\r\n  'PercentageOutlined',\r\n  'PhoneOutlined',\r\n  'PictureOutlined',\r\n  'PlaySquareOutlined',\r\n  'PoundCircleOutlined',\r\n  'PoundOutlined',\r\n  'PoweroffOutlined',\r\n  'PrinterOutlined',\r\n  'ProfileOutlined',\r\n  'ProjectOutlined',\r\n  'PropertySafetyOutlined',\r\n  'PullRequestOutlined',\r\n  'PushpinOutlined',\r\n  'QrcodeOutlined',\r\n  'ReadOutlined',\r\n  'ReconciliationOutlined',\r\n  'RedEnvelopeOutlined',\r\n  'ReloadOutlined',\r\n  'RestOutlined',\r\n  'RobotOutlined',\r\n  'RocketOutlined',\r\n  'RotateLeftOutlined',\r\n  'RotateRightOutlined',\r\n  'SafetyCertificateOutlined',\r\n  'SafetyOutlined',\r\n  'SaveOutlined',\r\n  'ScanOutlined',\r\n  'ScheduleOutlined',\r\n  'SearchOutlined',\r\n  'SecurityScanOutlined',\r\n  'SelectOutlined',\r\n  'SendOutlined',\r\n  'SettingOutlined',\r\n  'ShakeOutlined',\r\n  'ShareAltOutlined',\r\n  'ShopOutlined',\r\n  'ShoppingCartOutlined',\r\n  'ShoppingOutlined',\r\n  'SisternodeOutlined',\r\n  'SkinOutlined',\r\n  'SmileOutlined',\r\n  'SolutionOutlined',\r\n  'SoundOutlined',\r\n  'SplitCellsOutlined',\r\n  'StarOutlined',\r\n  'SubnodeOutlined',\r\n  'SwitcherOutlined',\r\n  'SyncOutlined',\r\n  'TableOutlined',\r\n  'TabletOutlined',\r\n  'TagOutlined',\r\n  'TagsOutlined',\r\n  'TeamOutlined',\r\n  'ThunderboltOutlined',\r\n  'ToTopOutlined',\r\n  'ToolOutlined',\r\n  'TrademarkCircleOutlined',\r\n  'TrademarkOutlined',\r\n  'TransactionOutlined',\r\n  'TranslationOutlined',\r\n  'TrophyOutlined',\r\n  'UngroupOutlined',\r\n  'UnlockOutlined',\r\n  'UploadOutlined',\r\n  'UsbOutlined',\r\n  'UserAddOutlined',\r\n  'UserDeleteOutlined',\r\n  'UserOutlined',\r\n  'UserSwitchOutlined',\r\n  'UsergroupAddOutlined',\r\n  'UsergroupDeleteOutlined',\r\n  'VerifiedOutlined',\r\n  'VideoCameraAddOutlined',\r\n  'VideoCameraOutlined',\r\n  'WalletOutlined',\r\n  'WhatsAppOutlined',\r\n  'WifiOutlined',\r\n  'WomanOutlined',\r\n]\r\n\r\nlet icons: any[] | null = null\r\n\r\ninterface IconLibraryProps {\r\n  /** 图标库是否展示 */\r\n  isShow: boolean\r\n\r\n  /** 切换展示 */\r\n  toggle: () => void\r\n\r\n  /** 点击图标的回调 */\r\n  onPress: (icon: any) => void\r\n}\r\n\r\nconst IconLibrary: FC<IconLibraryProps> = memo(props => {\r\n  const { isShow, onPress, toggle } = props\r\n\r\n  const icons = useMemo(() => {\r\n    return browserIcons.map(iconKey => {\r\n      return (\r\n        <IconItemWra key={iconKey} onClick={() => onPress(iconKey)}>\r\n          {getAntdIconByIconStr(iconKey)}\r\n        </IconItemWra>\r\n      )\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <Modal\r\n      title=\"点击图标即可选择\"\r\n      centered\r\n      visible={isShow}\r\n      footer={null}\r\n      onCancel={toggle}\r\n      mask={false}\r\n    >\r\n      <IconListWra>{icons}</IconListWra>\r\n    </Modal>\r\n  )\r\n})\r\n\r\nexport interface FormSelectIconProps {\r\n  iconPath?: string\r\n\r\n  // setIconPath: (iconPath: string) => void\r\n  setIconPath: any\r\n}\r\n\r\nconst FormSelectIcon: FC<FormSelectIconProps> = memo(props => {\r\n  const { iconPath, setIconPath } = props\r\n\r\n  const { closeFlag } = useContext(formDrawerContext)\r\n\r\n  const [icon, setIcon] = useState<string | undefined>(iconPath)\r\n\r\n  const [isShow, setShow] = useState(false)\r\n\r\n  /** 第一次动态更新问题 */\r\n  let firstRender = useRef(true)\r\n\r\n  const handleClickIcon = useCallback((iconKey: string) => {\r\n    setIcon(iconKey)\r\n    setIconPath(iconKey)\r\n    setShow(false)\r\n  }, [])\r\n\r\n  const toggleShow = useCallback(() => setShow(s => !s), [])\r\n\r\n  /** 实时和外面的匹配 */\r\n  useEffect(() => setIcon(iconPath), [iconPath])\r\n\r\n  /** 监听 drawer关闭的稍后， 设置icon为空 */\r\n  useEffect(() => {\r\n    /** 动态更新的生活，第一次渲染，我们就没必要因为关闭弹框去设置值了 */\r\n    if (firstRender.current) return\r\n    setIcon(undefined)\r\n  }, [closeFlag, firstRender])\r\n\r\n  useEffect(() => {\r\n    firstRender.current = false\r\n  }, [])\r\n\r\n  const btnIcon = useMemo(() => {\r\n    return icon ? getAntdIconByIconStr(icon) : <SmileTwoTone />\r\n  }, [icon])\r\n\r\n  return (\r\n    <div>\r\n      <Button icon={btnIcon} block onClick={toggleShow}>\r\n        {icon ? '修改图标' : '添加图标'}\r\n      </Button>\r\n\r\n      <IconLibrary\r\n        isShow={isShow}\r\n        toggle={toggleShow}\r\n        onPress={handleClickIcon}\r\n      />\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default FormSelectIcon\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-hash-change.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-footer.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-list.tsx",["501","502","503"],"import {\r\n  memo,\r\n  FC,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n  KeyboardEvent,\r\n  useContext,\r\n} from 'react'\r\nimport QueueAnim from 'rc-queue-anim'\r\nimport { TodoAction, Todo } from './index'\r\nimport TodoContext from './context'\r\nimport useDebounce from '../../hooks/useDebounce'\r\n\r\ninterface TodoItemProps {\r\n  todo: Todo\r\n  isCurrentEdit: boolean\r\n  setCurrentEdit: any\r\n}\r\n\r\nconst TodoItem: FC<TodoItemProps> = memo(props => {\r\n  const { todoAction } = useContext(TodoContext)\r\n\r\n  const {\r\n    todo: { _id, text, completed },\r\n    isCurrentEdit,\r\n    setCurrentEdit,\r\n  } = props\r\n\r\n  // 上一次点击的时间\r\n  const lastClickTime = useRef(0)\r\n\r\n  // 设置内部 text 提高性能\r\n  const [innerText, setInnerText] = useState(text)\r\n\r\n  // 如果父组件里面的 text 改变了我们就重置\r\n  useEffect(() => {\r\n    setInnerText(text)\r\n  }, [text])\r\n\r\n  const editInput = useRef<HTMLInputElement>(null)\r\n\r\n  const className = []\r\n\r\n  if (completed) {\r\n    className.push('completed')\r\n  }\r\n\r\n  if (isCurrentEdit) {\r\n    className.push('editing')\r\n  }\r\n\r\n  const handleDoubleClick = () => {\r\n    const now = Date.now()\r\n    // 判断当前时间和上一次的间隔是否符合\r\n\r\n    if (now - lastClickTime.current < 300) {\r\n      console.log('xxx')\r\n      setCurrentEdit(_id)\r\n    }\r\n\r\n    lastClickTime.current = now\r\n  }\r\n\r\n  const handleKeyDown = (event: KeyboardEvent<HTMLInputElement>) => {\r\n    const { keyCode } = event\r\n    // 如果不是回车直接 返回不做处理\r\n    if (keyCode !== 13) return\r\n\r\n    handleBlur()\r\n  }\r\n\r\n  const handleEdit = () => {\r\n    const { value } = editInput.current!\r\n\r\n    const text = value.trim()\r\n    setInnerText(text)\r\n  }\r\n\r\n  // 当我们失去焦点的时候，设置一下修改的内容，并且重置编辑的那一项\r\n  const handleBlur = () => {\r\n    setCurrentEdit(-1)\r\n  }\r\n\r\n  const debounceValue = useDebounce<string>(innerText, 1500)\r\n\r\n  useEffect(() => {\r\n    if (isCurrentEdit === false) return\r\n\r\n    // 如果 innerText 有值代表编辑 没有值我们这里直接删除\r\n    if (debounceValue) {\r\n      todoAction<TodoAction.change>(TodoAction.change, {\r\n        id: _id,\r\n        text: debounceValue,\r\n      })\r\n    } else {\r\n      todoAction<TodoAction.remove>(TodoAction.remove, _id)\r\n    }\r\n  }, [debounceValue])\r\n\r\n  useEffect(() => {\r\n    if (!isCurrentEdit || editInput.current === null) return\r\n\r\n    // 让 编辑输入框 获得焦点\r\n    editInput.current.focus()\r\n\r\n    editInput.current.addEventListener('blur', handleBlur)\r\n\r\n    return () => {\r\n      editInput.current!.removeEventListener('blur', handleBlur)\r\n    }\r\n  }, [isCurrentEdit])\r\n\r\n  return (\r\n    <li className={className.join(' ')}>\r\n      <div className=\"view\">\r\n        <input\r\n          className=\"toggle\"\r\n          type=\"checkbox\"\r\n          checked={completed}\r\n          onChange={() =>\r\n            todoAction<TodoAction.toggle>(TodoAction.toggle, {\r\n              id: _id,\r\n              completed: !completed,\r\n            })\r\n          }\r\n        />\r\n        <label onClick={() => handleDoubleClick()}>{innerText}</label>\r\n        <button\r\n          className=\"destroy\"\r\n          onClick={() => todoAction<TodoAction.remove>(TodoAction.remove, _id)}\r\n        ></button>\r\n      </div>\r\n      <input\r\n        ref={editInput}\r\n        onChange={() => handleEdit()}\r\n        onKeyDown={handleKeyDown}\r\n        className=\"edit\"\r\n        value={innerText}\r\n      />\r\n    </li>\r\n  )\r\n})\r\n\r\ninterface TodoListProps {\r\n  todoList: Todo[]\r\n}\r\n\r\n/** 待办列表展示组件 */\r\nconst TodoList: FC<TodoListProps> = memo(props => {\r\n  const { todoList } = props\r\n\r\n  const [currentEditTodoId, setCurrentEditTodoId] = useState<string | null>(\r\n    null,\r\n  )\r\n\r\n  return (\r\n    <section className=\"main\">\r\n      <QueueAnim delay={300} className=\"todo-list\">\r\n        {todoList.map(todo => (\r\n          <TodoItem\r\n            key={todo._id}\r\n            isCurrentEdit={currentEditTodoId === todo._id}\r\n            setCurrentEdit={setCurrentEditTodoId}\r\n            todo={todo}\r\n          />\r\n        ))}\r\n      </QueueAnim>\r\n    </section>\r\n  )\r\n})\r\n\r\nexport default TodoList\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\form-drawer\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\simple-upload\\index.tsx",["504","505","506","507"],"import { memo, FC, useState, useEffect, useContext } from 'react'\r\nimport { Upload, message, Switch, Input, Image } from 'antd'\r\nimport { UploadProps } from 'antd/lib/upload'\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons'\r\nimport { uploadFile2aly } from '../../api/file'\r\nimport { formDrawerContext } from '../form-drawer/context'\r\nimport { SimpleUploadWrapper } from './style'\r\nimport useInputValue from '../../hooks/use-input-value'\r\nimport { fallbackImg } from '../../views/album-admin'\r\n\r\n/** 阿里云上传文件结果 */\r\ninterface AlyUploadResult {\r\n  /** 文件名 */\r\n  filename: string\r\n\r\n  /** 图片完整地址 */\r\n  url: string\r\n}\r\n\r\ninterface SimpleUploadProps {\r\n  /** 图片地址 */\r\n  filepath?: string\r\n\r\n  /** 设置图片地址 */\r\n  setFilePath: (url: string) => void\r\n}\r\n\r\nconst SimpleUpload: FC<SimpleUploadProps> = memo(props => {\r\n  const { filepath, setFilePath } = props\r\n\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  const { closeFlag } = useContext(formDrawerContext)\r\n\r\n  const [imageUrl, setImageUrl] = useState<string | undefined>(filepath)\r\n\r\n  /** 当前控件是 input 还是 upload */\r\n  const [currentCtrl, setCurrentCtrl] = useState<'input' | 'upload'>('upload')\r\n\r\n  /** 文件输入框的值 */\r\n  const [\r\n    inputVal,\r\n    setInputVal,\r\n    handleInputChange,\r\n    trimInputVal,\r\n  ] = useInputValue('')\r\n\r\n  useEffect(() => {\r\n    setImageUrl(filepath)\r\n    setInputVal(filepath ?? '')\r\n  }, [filepath])\r\n\r\n  /** 监听 drawer关闭的稍后， 设置内容为空 */\r\n  useEffect(() => {\r\n    setImageUrl(undefined)\r\n    setInputVal('')\r\n  }, [closeFlag])\r\n\r\n  /** 处理验证文件 */\r\n  function handleValidFile(file: File) {\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\r\n    if (!isJpgOrPng) {\r\n      message.error('You can only upload JPG/PNG file!')\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2\r\n    if (!isLt2M) {\r\n      message.error('Image must smaller than 2MB!')\r\n    }\r\n\r\n    return isJpgOrPng && isLt2M\r\n  }\r\n\r\n  const uploadProps: UploadProps = {\r\n    listType: 'picture-card',\r\n    showUploadList: false,\r\n    beforeUpload(file: File) {\r\n      setLoading(true)\r\n\r\n      uploadFile2aly<AlyUploadResult>(file).then(res => {\r\n        const { data } = res.data\r\n        const { url } = data\r\n        setImageUrl(url)\r\n        setLoading(false)\r\n\r\n        /** 更改外面的值 */\r\n        setFilePath(url)\r\n      })\r\n\r\n      return false\r\n    },\r\n  }\r\n\r\n  /** 如果输入框的值发生改变 */\r\n  useEffect(() => {\r\n    setFilePath(trimInputVal)\r\n    setImageUrl(trimInputVal)\r\n  }, [trimInputVal])\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      {isLoading ? <LoadingOutlined /> : <PlusOutlined />}\r\n      <div style={{ marginTop: 8 }}>Upload</div>\r\n    </div>\r\n  )\r\n\r\n  /** 渲染控件 */\r\n  const renderCtrl = () => {\r\n    if (currentCtrl === 'upload') {\r\n      return (\r\n        <Upload {...uploadProps}>\r\n          {imageUrl ? (\r\n            <Image\r\n              src={imageUrl}\r\n              fallback={fallbackImg}\r\n              preview={false}\r\n              style={{ width: '100%' }}\r\n            />\r\n          ) : (\r\n            uploadButton\r\n          )}\r\n        </Upload>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <Input\r\n        value={inputVal}\r\n        onChange={handleInputChange}\r\n        placeholder=\"请输入文件地址\"\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <SimpleUploadWrapper>\r\n      {renderCtrl()}\r\n\r\n      <Switch\r\n        className=\"switch\"\r\n        checkedChildren=\"UP\"\r\n        unCheckedChildren=\"IN\"\r\n        onChange={isCheck => setCurrentCtrl(isCheck ? 'upload' : 'input')}\r\n        checked={currentCtrl === 'upload'}\r\n      />\r\n    </SimpleUploadWrapper>\r\n  )\r\n})\r\n\r\nexport default SimpleUpload\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\todos\\todo-control.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\use-input-value.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\hooks\\useDebounce.tsx",[],["508","509"],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\file.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\simple-upload\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\container\\container-breadcrumb.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\views\\bookmark-collect\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\album.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\category.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\tag.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\article.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\game.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\api\\record.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\filter-group\\input-search.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\filter-group\\drop-down.tsx",["510","511"],"import { FC, memo, useState, useMemo, useEffect } from 'react'\r\nimport { Menu, Dropdown } from 'antd'\r\n\r\nexport interface menuOption<T = any> {\r\n  title: string\r\n  value: T\r\n}\r\n\r\nexport interface FilterDropDownProps {\r\n  className?: string\r\n\r\n  /** 设置当前选中 */\r\n  toggle: (value: string) => void\r\n\r\n  /** 菜单列表选项 */\r\n  menuOptions: menuOption[]\r\n\r\n  /** 默认选中索引 */\r\n  defaultIndex?: number\r\n}\r\n\r\nconst FilterDropDown: FC<FilterDropDownProps> = memo(props => {\r\n  const { menuOptions, toggle, defaultIndex, className } = props\r\n\r\n  /** 当前选中索引 */\r\n  const [currentIndex, setIndex] = useState(defaultIndex ? defaultIndex : 0)\r\n\r\n  /** 当前选中成员 */\r\n  const currenItem = useMemo(() => menuOptions[currentIndex], [currentIndex])\r\n\r\n  function handleButtonClick(e: any) {\r\n    /** 索引从0 - len循环即可 */\r\n    const lastIndex = menuOptions.length - 1\r\n    setIndex(index => (index >= lastIndex ? 0 : index + 1))\r\n  }\r\n\r\n  function handleMenuClick(e: any) {\r\n    setIndex(Number(e.key))\r\n  }\r\n\r\n  /** 监听只要 currentIndex 改变，我们就设置外面的值 */\r\n  useEffect(() => toggle(currenItem.value), [currentIndex])\r\n\r\n  const menu = (\r\n    <Menu onClick={handleMenuClick}>\r\n      {menuOptions.map((option, index) => (\r\n        <Menu.Item key={index}>{option.title}</Menu.Item>\r\n      ))}\r\n    </Menu>\r\n  )\r\n  return (\r\n    <Dropdown.Button\r\n      onClick={handleButtonClick}\r\n      overlay={menu}\r\n      className={className}\r\n    >\r\n      <span style={{ minWidth: 80 }}>{currenItem.title}</span>\r\n    </Dropdown.Button>\r\n  )\r\n})\r\n\r\nexport default FilterDropDown\r\n","D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\editor\\index.tsx",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\editor\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\layouts\\style.ts",[],"D:\\fullStackProject\\BlogFullStackV2\\admin\\src\\components\\transition\\index.tsx",["512"],{"ruleId":"513","replacedBy":"514"},{"ruleId":"515","replacedBy":"516"},{"ruleId":"517","severity":1,"message":"518","line":37,"column":6,"nodeType":"519","endLine":37,"endColumn":31,"suggestions":"520"},{"ruleId":"517","severity":1,"message":"521","line":97,"column":6,"nodeType":"519","endLine":97,"endColumn":61,"suggestions":"522"},{"ruleId":"523","severity":1,"message":"524","line":37,"column":49,"nodeType":"525","messageId":"526","endLine":37,"endColumn":51},{"ruleId":"527","severity":1,"message":"528","line":1,"column":10,"nodeType":"529","messageId":"530","endLine":1,"endColumn":19},{"ruleId":"517","severity":1,"message":"531","line":30,"column":6,"nodeType":"529","endLine":30,"endColumn":10},{"ruleId":"517","severity":1,"message":"532","line":30,"column":6,"nodeType":"529","endLine":30,"endColumn":10,"suggestions":"533"},{"ruleId":"527","severity":1,"message":"534","line":1,"column":14,"nodeType":"529","messageId":"530","endLine":1,"endColumn":18},{"ruleId":"527","severity":1,"message":"535","line":3,"column":23,"nodeType":"529","messageId":"530","endLine":3,"endColumn":44},{"ruleId":"517","severity":1,"message":"536","line":167,"column":6,"nodeType":"519","endLine":167,"endColumn":60,"suggestions":"537"},{"ruleId":"538","severity":1,"message":"539","line":52,"column":5,"nodeType":"540","messageId":"541","endLine":52,"endColumn":63},{"ruleId":"527","severity":1,"message":"542","line":3,"column":45,"nodeType":"529","messageId":"530","endLine":3,"endColumn":51},{"ruleId":"517","severity":1,"message":"536","line":216,"column":6,"nodeType":"519","endLine":222,"endColumn":4,"suggestions":"543"},{"ruleId":"527","severity":1,"message":"544","line":1,"column":49,"nodeType":"529","messageId":"530","endLine":1,"endColumn":56},{"ruleId":"527","severity":1,"message":"545","line":162,"column":33,"nodeType":"529","messageId":"530","endLine":162,"endColumn":40},{"ruleId":"527","severity":1,"message":"546","line":163,"column":33,"nodeType":"529","messageId":"530","endLine":163,"endColumn":40},{"ruleId":"517","severity":1,"message":"547","line":218,"column":6,"nodeType":"519","endLine":218,"endColumn":19,"suggestions":"548"},{"ruleId":"527","severity":1,"message":"549","line":1,"column":35,"nodeType":"529","messageId":"530","endLine":1,"endColumn":46},{"ruleId":"517","severity":1,"message":"550","line":90,"column":3,"nodeType":"529","endLine":90,"endColumn":12,"suggestions":"551"},{"ruleId":"517","severity":1,"message":"552","line":131,"column":6,"nodeType":"519","endLine":131,"endColumn":42,"suggestions":"553"},{"ruleId":"527","severity":1,"message":"535","line":3,"column":23,"nodeType":"529","messageId":"530","endLine":3,"endColumn":44},{"ruleId":"517","severity":1,"message":"536","line":164,"column":6,"nodeType":"519","endLine":164,"endColumn":60,"suggestions":"554"},{"ruleId":"527","severity":1,"message":"555","line":54,"column":9,"nodeType":"529","messageId":"530","endLine":54,"endColumn":18},{"ruleId":"556","severity":1,"message":"557","line":92,"column":11,"nodeType":"558","endLine":92,"endColumn":41},{"ruleId":"517","severity":1,"message":"559","line":135,"column":5,"nodeType":"519","endLine":135,"endColumn":13,"suggestions":"560"},{"ruleId":"527","severity":1,"message":"561","line":185,"column":10,"nodeType":"529","messageId":"530","endLine":185,"endColumn":16},{"ruleId":"517","severity":1,"message":"562","line":222,"column":6,"nodeType":"519","endLine":222,"endColumn":32,"suggestions":"563"},{"ruleId":"517","severity":1,"message":"564","line":238,"column":5,"nodeType":"519","endLine":238,"endColumn":31,"suggestions":"565"},{"ruleId":"527","severity":1,"message":"566","line":2,"column":10,"nodeType":"529","messageId":"530","endLine":2,"endColumn":23},{"ruleId":"527","severity":1,"message":"567","line":2,"column":10,"nodeType":"529","messageId":"530","endLine":2,"endColumn":16},{"ruleId":"527","severity":1,"message":"568","line":14,"column":23,"nodeType":"529","messageId":"530","endLine":14,"endColumn":39},{"ruleId":"527","severity":1,"message":"569","line":100,"column":4,"nodeType":"529","messageId":"530","endLine":100,"endColumn":5},{"ruleId":"527","severity":1,"message":"570","line":136,"column":10,"nodeType":"529","messageId":"530","endLine":136,"endColumn":19},{"ruleId":"517","severity":1,"message":"571","line":71,"column":5,"nodeType":"519","endLine":71,"endColumn":11,"suggestions":"572"},{"ruleId":"517","severity":1,"message":"573","line":182,"column":8,"nodeType":"519","endLine":182,"endColumn":43,"suggestions":"574"},{"ruleId":"527","severity":1,"message":"575","line":20,"column":8,"nodeType":"529","messageId":"530","endLine":20,"endColumn":21},{"ruleId":"527","severity":1,"message":"576","line":39,"column":7,"nodeType":"529","messageId":"530","endLine":39,"endColumn":24},{"ruleId":"517","severity":1,"message":"577","line":119,"column":6,"nodeType":"519","endLine":119,"endColumn":16,"suggestions":"578"},{"ruleId":"527","severity":1,"message":"579","line":1,"column":10,"nodeType":"529","messageId":"530","endLine":1,"endColumn":13},{"ruleId":"527","severity":1,"message":"580","line":1,"column":19,"nodeType":"529","messageId":"530","endLine":1,"endColumn":28},{"ruleId":"527","severity":1,"message":"581","line":1,"column":40,"nodeType":"529","messageId":"530","endLine":1,"endColumn":48},{"ruleId":"527","severity":1,"message":"582","line":1,"column":50,"nodeType":"529","messageId":"530","endLine":1,"endColumn":61},{"ruleId":"527","severity":1,"message":"583","line":2,"column":10,"nodeType":"529","messageId":"530","endLine":2,"endColumn":14},{"ruleId":"527","severity":1,"message":"584","line":2,"column":16,"nodeType":"529","messageId":"530","endLine":2,"endColumn":23},{"ruleId":"527","severity":1,"message":"585","line":39,"column":11,"nodeType":"529","messageId":"530","endLine":39,"endColumn":18},{"ruleId":"527","severity":1,"message":"586","line":76,"column":28,"nodeType":"529","messageId":"530","endLine":76,"endColumn":37},{"ruleId":"517","severity":1,"message":"587","line":153,"column":6,"nodeType":"519","endLine":153,"endColumn":39,"suggestions":"588"},{"ruleId":"527","severity":1,"message":"589","line":259,"column":5,"nodeType":"529","messageId":"530","endLine":259,"endColumn":24},{"ruleId":"517","severity":1,"message":"590","line":283,"column":6,"nodeType":"519","endLine":283,"endColumn":8,"suggestions":"591"},{"ruleId":"517","severity":1,"message":"592","line":322,"column":6,"nodeType":"519","endLine":322,"endColumn":8,"suggestions":"593"},{"ruleId":"517","severity":1,"message":"594","line":99,"column":6,"nodeType":"519","endLine":99,"endColumn":21,"suggestions":"595"},{"ruleId":"517","severity":1,"message":"596","line":110,"column":17,"nodeType":"529","endLine":110,"endColumn":24},{"ruleId":"517","severity":1,"message":"597","line":112,"column":6,"nodeType":"519","endLine":112,"endColumn":21,"suggestions":"598"},{"ruleId":"517","severity":1,"message":"599","line":51,"column":6,"nodeType":"519","endLine":51,"endColumn":16,"suggestions":"600"},{"ruleId":"517","severity":1,"message":"599","line":57,"column":6,"nodeType":"519","endLine":57,"endColumn":17,"suggestions":"601"},{"ruleId":"527","severity":1,"message":"602","line":60,"column":12,"nodeType":"529","messageId":"530","endLine":60,"endColumn":27},{"ruleId":"517","severity":1,"message":"603","line":97,"column":6,"nodeType":"519","endLine":97,"endColumn":20,"suggestions":"604"},{"ruleId":"513","replacedBy":"605"},{"ruleId":"515","replacedBy":"606"},{"ruleId":"517","severity":1,"message":"607","line":29,"column":63,"nodeType":"519","endLine":29,"endColumn":77,"suggestions":"608"},{"ruleId":"517","severity":1,"message":"609","line":42,"column":45,"nodeType":"519","endLine":42,"endColumn":59,"suggestions":"610"},{"ruleId":"527","severity":1,"message":"534","line":1,"column":14,"nodeType":"529","messageId":"530","endLine":1,"endColumn":18},"no-native-reassign",["611"],"no-negated-in-lhs",["612"],"react-hooks/exhaustive-deps","React Hook useMemo has a missing dependency: 'location'. Either include it or remove the dependency array.","ArrayExpression",["613"],"React Hook useEffect has missing dependencies: 'props.history' and 'token'. Either include them or remove the dependency array.",["614"],"array-callback-return","Array.prototype.find() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","@typescript-eslint/no-unused-vars","'Component' is defined but never used.","Identifier","unusedVar","React Hook useMemo was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","React Hook useMemo has missing dependencies: 'actions' and 'dispatch'. Either include them or remove the dependency array.",["615"],"'memo' is defined but never used.","'TablePaginationConfig' is defined but never used.","React Hook useEffect has missing dependencies: 'pagination' and 'setPagination'. Either include them or remove the dependency array. Mutable values like 'pagination.current' aren't valid dependencies because mutating them doesn't re-render the component.",["616"],"no-unreachable","Unreachable code.","ExpressionStatement","unreachableCode","'Switch' is defined but never used.",["617"],"'useMemo' is defined but never used.","'oldName' is assigned a value but never used.","'newName' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'setPagination'. Either include it or remove the dependency array.",["618"],"'ChangeEvent' is defined but never used.","React Hook useEffect contains a call to 'setEditId'. Without a list of dependencies, this can lead to an infinite chain of updates. To fix this, pass [match.params] as a second argument to the useEffect Hook.",["619"],"React Hook useEffect has missing dependencies: 'setAuthor', 'setSummary', and 'setTitle'. Either include them or remove the dependency array. Mutable values like 'editorRef.current' aren't valid dependencies because mutating them doesn't re-render the component.",["620"],["621"],"'animation' is assigned a value but never used.","react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXOpeningElement","React Hook useCallback has a missing dependency: 'showDrawer'. Either include it or remove the dependency array.",["622"],"'refBug' is assigned a value but never used.","React Hook useMemo has an unnecessary dependency: 'drawerActionType.current'. Either exclude it or remove the dependency array. Mutable values like 'drawerActionType.current' aren't valid dependencies because mutating them doesn't re-render the component.",["623"],"React Hook useCallback has an unnecessary dependency: 'drawerActionType.current'. Either exclude it or remove the dependency array. Mutable values like 'drawerActionType.current' aren't valid dependencies because mutating them doesn't re-render the component.",["624"],"'createElement' is defined but never used.","'IRoute' is defined but never used.","'TodoContextProps' is defined but never used.","'T' is defined but never used.","'isLoading' is assigned a value but never used.","React Hook useCallback has a missing dependency: 'name'. Either include it or remove the dependency array.",["625"],"React Hook useMemo has an unnecessary dependency: 'closeFlag'. Either exclude it or remove the dependency array.",["626"],"'useHashChange' is defined but never used.","'BrowserQrCode' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'setMenus'. Either include it or remove the dependency array.",["627"],"'Url' is defined but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","'useCallback' is defined but never used.","'Card' is defined but never used.","'Divider' is defined but never used.","'percent' is assigned a value but never used.","'createdAt' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'location'. Either include it or remove the dependency array.",["628"],"'icons' is assigned a value but never used.","React Hook useMemo has a missing dependency: 'onPress'. Either include it or remove the dependency array.",["629"],"React Hook useCallback has a missing dependency: 'setIconPath'. Either include it or remove the dependency array.",["630"],"React Hook useEffect has missing dependencies: '_id', 'isCurrentEdit', and 'todoAction'. Either include them or remove the dependency array.",["631"],"The ref value 'editInput.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'editInput.current' to a variable inside the effect, and use that variable in the cleanup function.","React Hook useEffect has a missing dependency: 'handleBlur'. Either include it or remove the dependency array.",["632"],"React Hook useEffect has a missing dependency: 'setInputVal'. Either include it or remove the dependency array.",["633"],["634"],"'handleValidFile' is defined but never used.","React Hook useEffect has a missing dependency: 'setFilePath'. Either include it or remove the dependency array.",["635"],["611"],["612"],"React Hook useMemo has a missing dependency: 'menuOptions'. Either include it or remove the dependency array.",["636"],"React Hook useEffect has missing dependencies: 'currenItem.value' and 'toggle'. Either include them or remove the dependency array.",["637"],"no-global-assign","no-unsafe-negation",{"desc":"638","fix":"639"},{"desc":"640","fix":"641"},{"desc":"642","fix":"643"},{"desc":"644","fix":"645"},{"desc":"646","fix":"647"},{"desc":"648","fix":"649"},{"desc":"650","fix":"651"},{"desc":"652","fix":"653"},{"desc":"644","fix":"654"},{"desc":"655","fix":"656"},{"desc":"657","fix":"658"},{"desc":"657","fix":"659"},{"desc":"660","fix":"661"},{"desc":"662","fix":"663"},{"desc":"664","fix":"665"},{"desc":"666","fix":"667"},{"desc":"668","fix":"669"},{"desc":"670","fix":"671"},{"desc":"672","fix":"673"},{"desc":"674","fix":"675"},{"desc":"676","fix":"677"},{"desc":"678","fix":"679"},{"desc":"680","fix":"681"},{"desc":"682","fix":"683"},{"desc":"684","fix":"685"},"Update the dependencies array to be: [location, role]",{"range":"686","text":"687"},"Update the dependencies array to be: [toggleEnterLoading, fetchUserSuccess, fetchUserFailed, token, props.history]",{"range":"688","text":"689"},"Update the dependencies array to be: [actions, dispatch]",{"range":"690","text":"691"},"Update the dependencies array to be: [refreshFlag, pagination.pageSize, pagination, setPagination]",{"range":"692","text":"693"},"Update the dependencies array to be: [publishStatus, searchTitle, pagination.pageSize, refreshFlag, pagination, setPagination]",{"range":"694","text":"695"},"Update the dependencies array to be: [refreshFlag, setPagination]",{"range":"696","text":"697"},"Add dependencies array: [match.params]",{"range":"698","text":"699"},"Update the dependencies array to be: [editArticleData, setAuthor, setSummary, setTitle]",{"range":"700","text":"701"},{"range":"702","text":"693"},"Update the dependencies array to be: [column, showDrawer]",{"range":"703","text":"704"},"Update the dependencies array to be: []",{"range":"705","text":"706"},{"range":"707","text":"706"},"Update the dependencies array to be: [form, name]",{"range":"708","text":"709"},"Update the dependencies array to be: [editData, fields, form]",{"range":"710","text":"711"},"Update the dependencies array to be: [setMenus, userType]",{"range":"712","text":"713"},"Update the dependencies array to be: [location.pathname, flattenMenus, location]",{"range":"714","text":"715"},"Update the dependencies array to be: [onPress]",{"range":"716","text":"717"},"Update the dependencies array to be: [setIconPath]",{"range":"718","text":"719"},"Update the dependencies array to be: [_id, debounceValue, isCurrentEdit, todoAction]",{"range":"720","text":"721"},"Update the dependencies array to be: [handleBlur, isCurrentEdit]",{"range":"722","text":"723"},"Update the dependencies array to be: [filepath, setInputVal]",{"range":"724","text":"725"},"Update the dependencies array to be: [closeFlag, setInputVal]",{"range":"726","text":"727"},"Update the dependencies array to be: [setFilePath, trimInputVal]",{"range":"728","text":"729"},"Update the dependencies array to be: [currentIndex, menuOptions]",{"range":"730","text":"731"},"Update the dependencies array to be: [currenItem.value, currentIndex, toggle]",{"range":"732","text":"733"},[1237,1262],"[location, role]",[2563,2618],"[toggleEnterLoading, fetchUserSuccess, fetchUserFailed, token, props.history]",[788,792],"[actions, dispatch]",[4194,4248],"[refreshFlag, pagination.pageSize, pagination, setPagination]",[5739,5852],"[publishStatus, searchTitle, pagination.pageSize, refreshFlag, pagination, setPagination]",[5792,5805],"[refreshFlag, setPagination]",[2545,2545],", [match.params]",[3724,3760],"[editArticleData, setAuthor, setSummary, setTitle]",[7537,7591],[3287,3295],"[column, showDrawer]",[5714,5740],"[]",[6152,6178],[1660,1666],"[form, name]",[4470,4505],"[editData, fields, form]",[3060,3070],"[setMenus, userType]",[3275,3308],"[location.pathname, flattenMenus, location]",[6385,6387],"[onPress]",[7227,7229],"[setIconPath]",[2067,2082],"[_id, debounceValue, isCurrentEdit, todoAction]",[2386,2401],"[handleBlur, isCurrentEdit]",[1386,1396],"[filepath, setInputVal]",[1509,1520],"[closeFlag, setInputVal]",[2463,2477],"[setFilePath, trimInputVal]",[701,715],"[currentIndex, menuOptions]",[1060,1074],"[currenItem.value, currentIndex, toggle]"]